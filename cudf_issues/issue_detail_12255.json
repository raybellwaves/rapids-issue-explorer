{
    "url": "https://api.github.com/repos/rapidsai/cudf/issues/12255",
    "repository_url": "https://api.github.com/repos/rapidsai/cudf",
    "labels_url": "https://api.github.com/repos/rapidsai/cudf/issues/12255/labels{/name}",
    "comments_url": "https://api.github.com/repos/rapidsai/cudf/issues/12255/comments",
    "events_url": "https://api.github.com/repos/rapidsai/cudf/issues/12255/events",
    "html_url": "https://github.com/rapidsai/cudf/issues/12255",
    "id": 1468451943,
    "node_id": "I_kwDOBWUGps5Xhsxn",
    "number": 12255,
    "title": "[FEA] Support device-side de/compression of CSV files",
    "user": {
        "login": "randerzander",
        "id": 1692914,
        "node_id": "MDQ6VXNlcjE2OTI5MTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1692914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/randerzander",
        "html_url": "https://github.com/randerzander",
        "followers_url": "https://api.github.com/users/randerzander/followers",
        "following_url": "https://api.github.com/users/randerzander/following{/other_user}",
        "gists_url": "https://api.github.com/users/randerzander/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/randerzander/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/randerzander/subscriptions",
        "organizations_url": "https://api.github.com/users/randerzander/orgs",
        "repos_url": "https://api.github.com/users/randerzander/repos",
        "events_url": "https://api.github.com/users/randerzander/events{/privacy}",
        "received_events_url": "https://api.github.com/users/randerzander/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 599626561,
            "node_id": "MDU6TGFiZWw1OTk2MjY1NjE=",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        },
        {
            "id": 1013987352,
            "node_id": "MDU6TGFiZWwxMDEzOTg3MzUy",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/0%20-%20Backlog",
            "name": "0 - Backlog",
            "color": "d4c5f9",
            "default": false,
            "description": "In queue waiting for assignment"
        },
        {
            "id": 1139740666,
            "node_id": "MDU6TGFiZWwxMTM5NzQwNjY2",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/libcudf",
            "name": "libcudf",
            "color": "c5def5",
            "default": false,
            "description": "Affects libcudf (C++/CUDA) code."
        },
        {
            "id": 1185244142,
            "node_id": "MDU6TGFiZWwxMTg1MjQ0MTQy",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/cuIO",
            "name": "cuIO",
            "color": "fef2c0",
            "default": false,
            "description": "cuIO issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/rapidsai/cudf/milestones/12",
        "html_url": "https://github.com/rapidsai/cudf/milestone/12",
        "labels_url": "https://api.github.com/repos/rapidsai/cudf/milestones/12/labels",
        "id": 8136720,
        "node_id": "MI_kwDOBWUGps4AfCgQ",
        "number": 12,
        "title": "CSV continuous improvement",
        "description": "",
        "creator": {
            "login": "GregoryKimball",
            "id": 12725111,
            "node_id": "MDQ6VXNlcjEyNzI1MTEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/12725111?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GregoryKimball",
            "html_url": "https://github.com/GregoryKimball",
            "followers_url": "https://api.github.com/users/GregoryKimball/followers",
            "following_url": "https://api.github.com/users/GregoryKimball/following{/other_user}",
            "gists_url": "https://api.github.com/users/GregoryKimball/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GregoryKimball/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GregoryKimball/subscriptions",
            "organizations_url": "https://api.github.com/users/GregoryKimball/orgs",
            "repos_url": "https://api.github.com/users/GregoryKimball/repos",
            "events_url": "https://api.github.com/users/GregoryKimball/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GregoryKimball/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 32,
        "closed_issues": 5,
        "state": "open",
        "created_at": "2022-06-27T23:01:53Z",
        "updated_at": "2024-05-22T20:21:00Z",
        "due_on": null,
        "closed_at": null
    },
    "comments": 1,
    "created_at": "2022-11-29T17:34:28Z",
    "updated_at": "2023-04-02T22:38:52Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I have a lot of gzip compressed CSV files. When I use cudf to read them, the host handles decompression before copying decompressed data to device.\r\n\r\nFor cudf, that's not a problem, since it'll at worst be no slower than CPU.\r\n\r\nBut when I read w/ dask_cudf, compared to CPU dask.dataframe, I will usually have <=8 workers in a LocalCUDACluster. If I'm reading a large number of compressed files, those 8 workers will be highly bottlenecked by decompression.\r\n\r\n**Describe the solution you'd like**\r\nIdeally, we could have fast device side decompression for gzip compressed CSVs.\r\n\r\n**Describe alternatives you've considered**\r\nAnother solution for dask_cudf could be some logic to make more parallel use of host CPUs for decompression, which should increase throughput t device.\r\n\r\n**Additional context**\r\nPer file compression level can be high, such that doing device side decompression, even if faster than CPU, could easily lead to OOM scenarios.\r\n\r\nAn illustrative dataset for use in exploring this problem is NOAA's daily weather observations:\r\n```\r\nimport urllib, os\r\n\r\ndata_dir = '/raid/weather/csv/'\r\n\r\n# download weather observations\r\nbase_url = 'ftp://ftp.ncdc.noaa.gov/pub/data/ghcn/daily/by_year/'\r\nyears = list(range(1763, 2020))\r\nfor year in years:\r\n    fn = str(year) + '.csv.gz'\r\n    if not os.path.isfile(data_dir+fn):\r\n        print(f'Downloading {base_url+fn} to {data_dir+fn}')\r\n        urllib.request.urlretrieve(base_url+fn, data_dir+fn) \r\n```\r\n\r\ncc @GregoryKimball ",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/12255/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/rapidsai/cudf/issues/12255/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}