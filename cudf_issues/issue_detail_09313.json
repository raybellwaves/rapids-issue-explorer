{
    "url": "https://api.github.com/repos/rapidsai/cudf/issues/9313",
    "repository_url": "https://api.github.com/repos/rapidsai/cudf",
    "labels_url": "https://api.github.com/repos/rapidsai/cudf/issues/9313/labels{/name}",
    "comments_url": "https://api.github.com/repos/rapidsai/cudf/issues/9313/comments",
    "events_url": "https://api.github.com/repos/rapidsai/cudf/issues/9313/events",
    "html_url": "https://github.com/rapidsai/cudf/issues/9313",
    "id": 1008004852,
    "node_id": "I_kwDOBWUGps48FO70",
    "number": 9313,
    "title": "[BUG] pyorc does not read string column statistics of cuDF generated files",
    "user": {
        "login": "devavret",
        "id": 3027195,
        "node_id": "MDQ6VXNlcjMwMjcxOTU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3027195?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/devavret",
        "html_url": "https://github.com/devavret",
        "followers_url": "https://api.github.com/users/devavret/followers",
        "following_url": "https://api.github.com/users/devavret/following{/other_user}",
        "gists_url": "https://api.github.com/users/devavret/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/devavret/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/devavret/subscriptions",
        "organizations_url": "https://api.github.com/users/devavret/orgs",
        "repos_url": "https://api.github.com/users/devavret/repos",
        "events_url": "https://api.github.com/users/devavret/events{/privacy}",
        "received_events_url": "https://api.github.com/users/devavret/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 599626559,
            "node_id": "MDU6TGFiZWw1OTk2MjY1NTk=",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/bug",
            "name": "bug",
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working"
        },
        {
            "id": 1139740666,
            "node_id": "MDU6TGFiZWwxMTM5NzQwNjY2",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/libcudf",
            "name": "libcudf",
            "color": "c5def5",
            "default": false,
            "description": "Affects libcudf (C++/CUDA) code."
        },
        {
            "id": 1185244142,
            "node_id": "MDU6TGFiZWwxMTg1MjQ0MTQy",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/cuIO",
            "name": "cuIO",
            "color": "fef2c0",
            "default": false,
            "description": "cuIO issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2021-09-27T11:01:54Z",
    "updated_at": "2023-04-02T22:39:54Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "When reading the statistics for an ORC file written by cuDF, the result for sum is wrong when read using cuDF and absent when using pyorc.\r\n\r\n```python\r\nIn [1]: import cudf\r\n\r\nIn [2]: import pyorc\r\n\r\nIn [3]: gdf = cudf.DataFrame({'b':[1,7], 'a':['Badam khao', 'roz']})\r\n\r\nIn [4]: gdf.to_orc(\"temp.orc\")\r\n\r\nIn [5]: cudf.io.orc.read_orc_statistics([\"temp.orc\"])\r\nOut[5]: \r\n([{'col0': {'number_of_values': 2},\r\n   'b': {'number_of_values': 2, 'minimum': 1, 'maximum': 7, 'sum': 8},\r\n   'a': {'number_of_values': 2,\r\n    'minimum': 'Badam khao',\r\n    'maximum': 'roz',\r\n    'sum': -7}}],\r\n [{'col0': {'number_of_values': 2},\r\n   'b': {'number_of_values': 2, 'minimum': 1, 'maximum': 7, 'sum': 8},\r\n   'a': {'number_of_values': 2,\r\n    'minimum': 'Badam khao',\r\n    'maximum': 'roz',\r\n    'sum': -7}}])\r\n\r\nIn [6]: f = open(\"temp.orc\", 'rb')\r\n\r\nIn [7]: r = pyorc.Reader(f)\r\n\r\nIn [8]: r[1].statistics\r\nOut[8]: \r\n{'has_null': False,\r\n 'number_of_values': 2,\r\n 'minimum': 1,\r\n 'maximum': 7,\r\n 'sum': 8,\r\n 'kind': <TypeKind.LONG: 4>}\r\n\r\nIn [9]: r[2].statistics\r\nOut[9]: {'has_null': False, 'number_of_values': 2, 'kind': <TypeKind.STRING: 7>}\r\n```\r\n\r\n#### Expected result\r\nSum statistics contains the sum of lengths of all the strings in the column. We do correctly compute this in libcudf, so it should be present when reading with pyorc and correct when reading with cudf.\r\n\r\nThere's two issues here:\r\n\r\n- [x] String sum statistics are encoded incorrectly (will be fixed by https://github.com/rapidsai/cudf/pull/11740)\r\n- [ ] pyroc does not read cuDF-written ORC string statistics",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/9313/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/rapidsai/cudf/issues/9313/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}