{
    "url": "https://api.github.com/repos/rapidsai/cudf/issues/12793",
    "repository_url": "https://api.github.com/repos/rapidsai/cudf",
    "labels_url": "https://api.github.com/repos/rapidsai/cudf/issues/12793/labels{/name}",
    "comments_url": "https://api.github.com/repos/rapidsai/cudf/issues/12793/comments",
    "events_url": "https://api.github.com/repos/rapidsai/cudf/issues/12793/events",
    "html_url": "https://github.com/rapidsai/cudf/issues/12793",
    "id": 1588035889,
    "node_id": "I_kwDOBWUGps5ep4Ex",
    "number": 12793,
    "title": "[ENH]: Reworking of `iloc` and `loc` indexing",
    "user": {
        "login": "wence-",
        "id": 1126981,
        "node_id": "MDQ6VXNlcjExMjY5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1126981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wence-",
        "html_url": "https://github.com/wence-",
        "followers_url": "https://api.github.com/users/wence-/followers",
        "following_url": "https://api.github.com/users/wence-/following{/other_user}",
        "gists_url": "https://api.github.com/users/wence-/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/wence-/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wence-/subscriptions",
        "organizations_url": "https://api.github.com/users/wence-/orgs",
        "repos_url": "https://api.github.com/users/wence-/repos",
        "events_url": "https://api.github.com/users/wence-/events{/privacy}",
        "received_events_url": "https://api.github.com/users/wence-/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1139741213,
            "node_id": "MDU6TGFiZWwxMTM5NzQxMjEz",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/Python",
            "name": "Python",
            "color": "1d76db",
            "default": false,
            "description": "Affects Python cuDF API."
        },
        {
            "id": 2546521024,
            "node_id": "MDU6TGFiZWwyNTQ2NTIxMDI0",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/improvement",
            "name": "improvement",
            "color": "bfd4f2",
            "default": false,
            "description": "Improvement / enhancement to an existing function"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "wence-",
        "id": 1126981,
        "node_id": "MDQ6VXNlcjExMjY5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1126981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wence-",
        "html_url": "https://github.com/wence-",
        "followers_url": "https://api.github.com/users/wence-/followers",
        "following_url": "https://api.github.com/users/wence-/following{/other_user}",
        "gists_url": "https://api.github.com/users/wence-/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/wence-/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wence-/subscriptions",
        "organizations_url": "https://api.github.com/users/wence-/orgs",
        "repos_url": "https://api.github.com/users/wence-/repos",
        "events_url": "https://api.github.com/users/wence-/events{/privacy}",
        "received_events_url": "https://api.github.com/users/wence-/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "wence-",
            "id": 1126981,
            "node_id": "MDQ6VXNlcjExMjY5ODE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1126981?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wence-",
            "html_url": "https://github.com/wence-",
            "followers_url": "https://api.github.com/users/wence-/followers",
            "following_url": "https://api.github.com/users/wence-/following{/other_user}",
            "gists_url": "https://api.github.com/users/wence-/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wence-/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wence-/subscriptions",
            "organizations_url": "https://api.github.com/users/wence-/orgs",
            "repos_url": "https://api.github.com/users/wence-/repos",
            "events_url": "https://api.github.com/users/wence-/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wence-/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2023-02-16T16:49:43Z",
    "updated_at": "2024-05-15T23:03:20Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "## Status quo\n\nIndexing of dataframes and series happens through six user-facing routes:\n\n- `DataFrame.__setitem__`/`DataFrame.__getitem__`\n- `DataFrame.iloc.__setitem__`/`DataFrame.iloc.__getitem__`\n- `DataFrame.loc.__setitem__`/`DataFrame.loc.__getitem__`\n- `Series.__setitem__`/`Series.__getitem__`\n- `Series.iloc.__setitem__`/`Series.iloc.__getitem__`\n- `Series.loc.__setitem__`/`Series.loc.__getitem__`\n\nThese all have slightly different semantics (to match pandas behaviour), but there is still quite a lot of (possibly unnecessary) code duplication and a number of bugs around indexing. Many of these look to be because the business logic of handling slicing/gather-by-mask/indexing is intertwined with error handling and determining exactly what to slice. There's also logic effectively repeated between the loc and iloc versions in both cases.\n\nIt would be nice if the number of different paths into indexing was reduced, perhaps it is a pipe dream to share between Series and DataFrame (since a DataFrame is not just a collection of Series), but it feels like it should be possible to share more between iloc/loc/__setgetitem__.\n\nRelated issues:\n\n```[tasklist]\n### `iloc` bugs\n- [ ] #12748 \n- [ ] #13013\n- [ ] #13015\n- [ ] #13265\n- [ ] #13266 \n- [ ] #13267\n- [ ] #13515\n- [ ] #13293\n```\n```[tasklist]\n### Index bugs\n- [ ] #12954\n```\n\n```[tasklist]\n### `loc` bugs\n- [ ] #7448\n- [ ] #8585\n- [ ] #8693\n- [ ] #11298\n- [ ] #11944\n- [ ] #12259\n- [ ] #12286\n- [ ] #12504\n- [ ] #12505\n- [ ] #12801\n- [ ] #12833\n- [ ] #13014\n- [ ] #13015\n- [ ] #13031\n- [ ] #13268\n- [ ] #13269\n- [ ] #13270\n- [ ] #13379\n- [ ] https://github.com/rapidsai/cudf/issues/13653\n- [ ] https://github.com/rapidsai/cudf/issues/13658\n- [ ] https://github.com/rapidsai/cudf/issues/13652\n```\n```[tasklist]\n### Views vs. copies\n- [ ] #7374\n- [ ] #11085\n- [ ] #11990 \n```\n\n```[tasklist]\n### Other (mostly dtype-related)\n- [ ] #2684\n- [ ] #8184\n- [ ] #11477\n- [ ] #12039\n- [ ] #13532\n```\n\nYour issue here.\n\nAs we can see from this classification, `loc`-based indexing is definitely the harder nut to crack. The edge-cases that provoke most of the issues are cases where the values used in the indexing are _not_ in the index.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/12793/reactions",
        "total_count": 4,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 3,
        "rocket": 1,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/rapidsai/cudf/issues/12793/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}