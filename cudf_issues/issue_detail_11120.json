{
    "url": "https://api.github.com/repos/rapidsai/cudf/issues/11120",
    "repository_url": "https://api.github.com/repos/rapidsai/cudf",
    "labels_url": "https://api.github.com/repos/rapidsai/cudf/issues/11120/labels{/name}",
    "comments_url": "https://api.github.com/repos/rapidsai/cudf/issues/11120/comments",
    "events_url": "https://api.github.com/repos/rapidsai/cudf/issues/11120/events",
    "html_url": "https://github.com/rapidsai/cudf/issues/11120",
    "id": 1275390056,
    "node_id": "I_kwDOBWUGps5MBOho",
    "number": 11120,
    "title": "[BUG] libcudf tests warn when linking when building in a conda environment without conda compiler metapackages",
    "user": {
        "login": "kkraus14",
        "id": 3665167,
        "node_id": "MDQ6VXNlcjM2NjUxNjc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3665167?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kkraus14",
        "html_url": "https://github.com/kkraus14",
        "followers_url": "https://api.github.com/users/kkraus14/followers",
        "following_url": "https://api.github.com/users/kkraus14/following{/other_user}",
        "gists_url": "https://api.github.com/users/kkraus14/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/kkraus14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/kkraus14/subscriptions",
        "organizations_url": "https://api.github.com/users/kkraus14/orgs",
        "repos_url": "https://api.github.com/users/kkraus14/repos",
        "events_url": "https://api.github.com/users/kkraus14/events{/privacy}",
        "received_events_url": "https://api.github.com/users/kkraus14/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 599626559,
            "node_id": "MDU6TGFiZWw1OTk2MjY1NTk=",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/bug",
            "name": "bug",
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working"
        },
        {
            "id": 1013987352,
            "node_id": "MDU6TGFiZWwxMDEzOTg3MzUy",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/0%20-%20Backlog",
            "name": "0 - Backlog",
            "color": "d4c5f9",
            "default": false,
            "description": "In queue waiting for assignment"
        },
        {
            "id": 1139750005,
            "node_id": "MDU6TGFiZWwxMTM5NzUwMDA1",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/CMake",
            "name": "CMake",
            "color": "d319ab",
            "default": false,
            "description": "CMake build issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/rapidsai/cudf/milestones/25",
        "html_url": "https://github.com/rapidsai/cudf/milestone/25",
        "labels_url": "https://api.github.com/repos/rapidsai/cudf/milestones/25/labels",
        "id": 8693498,
        "node_id": "MI_kwDOBWUGps4AhKb6",
        "number": 25,
        "title": "Helps libcudf C++ integrations",
        "description": "",
        "creator": {
            "login": "GregoryKimball",
            "id": 12725111,
            "node_id": "MDQ6VXNlcjEyNzI1MTEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/12725111?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GregoryKimball",
            "html_url": "https://github.com/GregoryKimball",
            "followers_url": "https://api.github.com/users/GregoryKimball/followers",
            "following_url": "https://api.github.com/users/GregoryKimball/following{/other_user}",
            "gists_url": "https://api.github.com/users/GregoryKimball/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GregoryKimball/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GregoryKimball/subscriptions",
            "organizations_url": "https://api.github.com/users/GregoryKimball/orgs",
            "repos_url": "https://api.github.com/users/GregoryKimball/repos",
            "events_url": "https://api.github.com/users/GregoryKimball/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GregoryKimball/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 14,
        "closed_issues": 7,
        "state": "open",
        "created_at": "2022-11-26T17:28:14Z",
        "updated_at": "2024-05-13T23:56:47Z",
        "due_on": null,
        "closed_at": null
    },
    "comments": 2,
    "created_at": "2022-06-17T19:32:26Z",
    "updated_at": "2024-06-03T22:09:31Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "When building libcudf and tests in a conda environment without having the compiler metapackages installed (`c-compiler`, `cxx-compiler`, etc.), it produces warnings about not finding `libz.so.1` needed by `libcudf.so`:\r\n```\r\n[406/674] Linking CXX executable gtests/COLUMN_TEST\r\n/home/keith/miniconda3/envs/dev/bin/../lib/gcc/x86_64-conda-linux-gnu/10.3.0/../../../../x86_64-conda-linux-gnu/bin/ld: warning: libz.so.1, needed by libcudf.so, not found (try using -rpath or -rpath-link)\r\n```\r\n\r\nI believe this is due to both the `conda_env` target (https://github.com/rapidsai/cudf/blob/branch-22.08/cpp/CMakeLists.txt#L628) and the zlib target (https://github.com/rapidsai/cudf/blob/branch-22.08/cpp/CMakeLists.txt#L622) both being private links for the libcudf target. zlib is just one example of this, but this could happen for any other private target of libcudf that comes from the conda environment.\r\n\r\nThis isn't a problem for the compiler metapackages because they set a slew of compiler CLI flags, notably an `rpath-link` flag into the conda environment. I do not use these metapackages because those CLI flags set will point into the conda environment before pointing into the local build directory, which makes having both an install and a working directory a pain.\r\n\r\nI believe the fix is either changing the `conda_env` link to be a `PUBLIC` link of the libcudf target, or adding a `conda_env` link to the tests.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/11120/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/rapidsai/cudf/issues/11120/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}