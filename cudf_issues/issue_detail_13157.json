{
    "url": "https://api.github.com/repos/rapidsai/cudf/issues/13157",
    "repository_url": "https://api.github.com/repos/rapidsai/cudf",
    "labels_url": "https://api.github.com/repos/rapidsai/cudf/issues/13157/labels{/name}",
    "comments_url": "https://api.github.com/repos/rapidsai/cudf/issues/13157/comments",
    "events_url": "https://api.github.com/repos/rapidsai/cudf/issues/13157/events",
    "html_url": "https://github.com/rapidsai/cudf/issues/13157",
    "id": 1671938504,
    "node_id": "I_kwDOBWUGps5jp8HI",
    "number": 13157,
    "title": "[FEA] Improve `cudf::distinct` with cuco reduction map",
    "user": {
        "login": "PointKernel",
        "id": 12716979,
        "node_id": "MDQ6VXNlcjEyNzE2OTc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/12716979?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PointKernel",
        "html_url": "https://github.com/PointKernel",
        "followers_url": "https://api.github.com/users/PointKernel/followers",
        "following_url": "https://api.github.com/users/PointKernel/following{/other_user}",
        "gists_url": "https://api.github.com/users/PointKernel/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/PointKernel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/PointKernel/subscriptions",
        "organizations_url": "https://api.github.com/users/PointKernel/orgs",
        "repos_url": "https://api.github.com/users/PointKernel/repos",
        "events_url": "https://api.github.com/users/PointKernel/events{/privacy}",
        "received_events_url": "https://api.github.com/users/PointKernel/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 599626561,
            "node_id": "MDU6TGFiZWw1OTk2MjY1NjE=",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        },
        {
            "id": 1139740666,
            "node_id": "MDU6TGFiZWwxMTM5NzQwNjY2",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/libcudf",
            "name": "libcudf",
            "color": "c5def5",
            "default": false,
            "description": "Affects libcudf (C++/CUDA) code."
        },
        {
            "id": 1322252617,
            "node_id": "MDU6TGFiZWwxMzIyMjUyNjE3",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/Performance",
            "name": "Performance",
            "color": "C2E0C6",
            "default": false,
            "description": "Performance related issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/rapidsai/cudf/milestones/18",
        "html_url": "https://github.com/rapidsai/cudf/milestone/18",
        "labels_url": "https://api.github.com/repos/rapidsai/cudf/milestones/18/labels",
        "id": 8496553,
        "node_id": "MI_kwDOBWUGps4AgaWp",
        "number": 18,
        "title": "Refactor using cuco containers",
        "description": "",
        "creator": {
            "login": "GregoryKimball",
            "id": 12725111,
            "node_id": "MDQ6VXNlcjEyNzI1MTEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/12725111?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GregoryKimball",
            "html_url": "https://github.com/GregoryKimball",
            "followers_url": "https://api.github.com/users/GregoryKimball/followers",
            "following_url": "https://api.github.com/users/GregoryKimball/following{/other_user}",
            "gists_url": "https://api.github.com/users/GregoryKimball/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GregoryKimball/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GregoryKimball/subscriptions",
            "organizations_url": "https://api.github.com/users/GregoryKimball/orgs",
            "repos_url": "https://api.github.com/users/GregoryKimball/repos",
            "events_url": "https://api.github.com/users/GregoryKimball/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GregoryKimball/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 5,
        "closed_issues": 7,
        "state": "open",
        "created_at": "2022-10-04T19:08:31Z",
        "updated_at": "2023-10-04T21:23:25Z",
        "due_on": null,
        "closed_at": null
    },
    "comments": 4,
    "created_at": "2023-04-17T20:43:29Z",
    "updated_at": "2024-02-23T18:02:04Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\n#11052 introduces the keep control option into `cudf::distinct` and makes it possible for users to perform a more efficient hash-based `drop_duplicates`. The PR uses a single hash map together with thrust algorithms to mimic the behavior of a reduction map. This whole process can be largely simplified once https://github.com/NVIDIA/cuCollections/pull/98 is ready. TODO:\r\n\r\n- [ ] Replace `static_map` + `thrust` algos with `cuco::static_reduction_map` + `cudf::sort`\r\n- [ ] Update Python bindings to use the hash-based algorithm\r\n- [ ] Investigate the performance impact with various map occupancy and sort-based algo v.s. hash-based algo\r\n- [ ] Minimize memory footprint\r\n\r\n**Describe the solution you'd like**\r\nUses a  `cuco::static_reduction_map` where the key is the row index and the value is the min/max index of equivalent rows (depending on the keep option).\r\n\r\n**Describe alternatives you've considered**\r\nWe could also take a pair of row hash value and row index as the key which performs the expensive row hash computation only once for better runtime performance. This requires more memory footprint though. To be evaluated.\r\n\r\n**Additional context**\r\n#11656 may not be required by the new reduction map implementation.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/13157/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/rapidsai/cudf/issues/13157/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}