{
    "url": "https://api.github.com/repos/rapidsai/cudf/issues/14975",
    "repository_url": "https://api.github.com/repos/rapidsai/cudf",
    "labels_url": "https://api.github.com/repos/rapidsai/cudf/issues/14975/labels{/name}",
    "comments_url": "https://api.github.com/repos/rapidsai/cudf/issues/14975/comments",
    "events_url": "https://api.github.com/repos/rapidsai/cudf/issues/14975/events",
    "html_url": "https://github.com/rapidsai/cudf/issues/14975",
    "id": 2121286850,
    "node_id": "I_kwDOBWUGps5-cETC",
    "number": 14975,
    "title": "[FEA] Offer more control over CPU fallback in cudf.pandas",
    "user": {
        "login": "bdice",
        "id": 3943761,
        "node_id": "MDQ6VXNlcjM5NDM3NjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3943761?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bdice",
        "html_url": "https://github.com/bdice",
        "followers_url": "https://api.github.com/users/bdice/followers",
        "following_url": "https://api.github.com/users/bdice/following{/other_user}",
        "gists_url": "https://api.github.com/users/bdice/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bdice/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bdice/subscriptions",
        "organizations_url": "https://api.github.com/users/bdice/orgs",
        "repos_url": "https://api.github.com/users/bdice/repos",
        "events_url": "https://api.github.com/users/bdice/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bdice/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 599626561,
            "node_id": "MDU6TGFiZWw1OTk2MjY1NjE=",
            "url": "https://api.github.com/repos/rapidsai/cudf/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "mroeschke",
        "id": 10647082,
        "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
        "avatar_url": "https://avatars.githubusercontent.com/u/10647082?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mroeschke",
        "html_url": "https://github.com/mroeschke",
        "followers_url": "https://api.github.com/users/mroeschke/followers",
        "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
        "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
        "organizations_url": "https://api.github.com/users/mroeschke/orgs",
        "repos_url": "https://api.github.com/users/mroeschke/repos",
        "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mroeschke/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "mroeschke",
            "id": 10647082,
            "node_id": "MDQ6VXNlcjEwNjQ3MDgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/10647082?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mroeschke",
            "html_url": "https://github.com/mroeschke",
            "followers_url": "https://api.github.com/users/mroeschke/followers",
            "following_url": "https://api.github.com/users/mroeschke/following{/other_user}",
            "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions",
            "organizations_url": "https://api.github.com/users/mroeschke/orgs",
            "repos_url": "https://api.github.com/users/mroeschke/repos",
            "events_url": "https://api.github.com/users/mroeschke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mroeschke/received_events",
            "type": "User",
            "site_admin": false
        },
        {
            "login": "Matt711",
            "id": 41342305,
            "node_id": "MDQ6VXNlcjQxMzQyMzA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/41342305?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Matt711",
            "html_url": "https://github.com/Matt711",
            "followers_url": "https://api.github.com/users/Matt711/followers",
            "following_url": "https://api.github.com/users/Matt711/following{/other_user}",
            "gists_url": "https://api.github.com/users/Matt711/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Matt711/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Matt711/subscriptions",
            "organizations_url": "https://api.github.com/users/Matt711/orgs",
            "repos_url": "https://api.github.com/users/Matt711/repos",
            "events_url": "https://api.github.com/users/Matt711/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Matt711/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 12,
    "created_at": "2024-02-06T17:03:52Z",
    "updated_at": "2024-05-30T14:31:42Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\nThe default execution model for `cudf.pandas` is to try to execute an operation on the GPU, then fall back to the CPU if it fails for any reason. This approach is desirable for end-users to maximize the number of cases where `cudf.pandas` \"just works\", but it makes it difficult to analyze when failures are occurring and why. The former can be addressed by running under the profiler, but that is more cumbersome than we would like in many cases where we would rather get a quick signal in the form of failure (e.g. when running a workflow or a test suite to analyze unsupported cases). Furthermore, there is no easy way to determine whether cudf and pandas return the same results for a given operation, which is a different failure mode that is currently not possible to capture.\r\n\r\n**Describe the solution you'd like**\r\nWe should generalize `_fast_slow_function_call` to support a wider range of fallback options. These options could be configurable by an environment variable, or by some global configuration option (the former is probably fine to start with). The different behaviors we would want to support are:\r\n- Error on fallback. We could then run the pandas test suite with this turned on and get a sense of how many tests cudf passes on its own.\r\n- Error on specific types of fallback. This would allow us to analyze the types of fallback that are occurring. Some of the most obvious error modes I can foresee (there are certainly others) are:\r\n    - Out of memory errors, for the sake of planning No OOM related work\r\n    - AttributeErrors for missing functionality\r\n    - TypeErrors for differing function signatures\r\n- Error when cudf and pandas produce different outputs. This would be an extra branch within the fast path where the slow path is run even if the fast path succeeds, and then the fast and slow paths are compared for equivalence.\r\n\r\nWe may want to support warning instead of raising errors in some cases, but I don't think that's critical to start.\r\n\r\n**Describe alternatives you've considered**\r\nThis could be configured by the cudf.pandas profiler, or a similar context manager?\r\n\r\n**Additional context**\r\nFeedback from @ianozsvald and @lmeyerov would be welcome!",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/14975/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/rapidsai/cudf/issues/14975/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}