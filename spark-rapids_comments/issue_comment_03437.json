[
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/919499751",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3437#issuecomment-919499751",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3437",
        "id": 919499751,
        "node_id": "IC_kwDOD7z77c42znPn",
        "user": {
            "login": "sameerz",
            "id": 7036315,
            "node_id": "MDQ6VXNlcjcwMzYzMTU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7036315?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sameerz",
            "html_url": "https://github.com/sameerz",
            "followers_url": "https://api.github.com/users/sameerz/followers",
            "following_url": "https://api.github.com/users/sameerz/following{/other_user}",
            "gists_url": "https://api.github.com/users/sameerz/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sameerz/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sameerz/subscriptions",
            "organizations_url": "https://api.github.com/users/sameerz/orgs",
            "repos_url": "https://api.github.com/users/sameerz/repos",
            "events_url": "https://api.github.com/users/sameerz/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sameerz/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-14T20:45:26Z",
        "updated_at": "2021-09-14T20:45:26Z",
        "author_association": "COLLABORATOR",
        "body": "This should be resolved when https://github.com/NVIDIA/spark-rapids/issues/3194 is resolved.  If 3914 does not get resolved in a timely fashion, we should come back to this and address it.  ",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/919499751/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/919508757",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3437#issuecomment-919508757",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3437",
        "id": 919508757,
        "node_id": "IC_kwDOD7z77c42zpcV",
        "user": {
            "login": "abellina",
            "id": 1901059,
            "node_id": "MDQ6VXNlcjE5MDEwNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1901059?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/abellina",
            "html_url": "https://github.com/abellina",
            "followers_url": "https://api.github.com/users/abellina/followers",
            "following_url": "https://api.github.com/users/abellina/following{/other_user}",
            "gists_url": "https://api.github.com/users/abellina/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/abellina/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/abellina/subscriptions",
            "organizations_url": "https://api.github.com/users/abellina/orgs",
            "repos_url": "https://api.github.com/users/abellina/repos",
            "events_url": "https://api.github.com/users/abellina/events{/privacy}",
            "received_events_url": "https://api.github.com/users/abellina/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-14T21:00:04Z",
        "updated_at": "2021-09-14T21:01:57Z",
        "author_association": "COLLABORATOR",
        "body": "> This should be resolved when #3194 is resolved. If 3914 does not get resolved in a timely fashion, we should come back to this and address it.\r\n\r\nThis issue is orthogonal to #3194. The patterns that @sperlingxx is talking about here are patterns to denote what an aggregate exec will look like for the tests only. For example, databricks may use the `Complete` in some cases, where Apache Spark will treat the aggregate differently, and if we are trying to test that the GPU aggregate can take and produce compatible output with the CPU, we need to be able to address each flavor of the hash aggregate plans. For example (stolen from one the tests @sperlingxx had): \r\n\r\n```\r\n_replace_modes_single_distinct = [\r\n    # Spark: CPU -> CPU -> GPU(PartialMerge) -> GPU(Partial)\r\n    # Databricks runtime: CPU(Final and Complete) -> GPU(PartialMerge)\r\n    'partial|partialMerge',\r\n    # Spark: GPU(Final) -> GPU(PartialMerge&Partial) -> CPU(PartialMerge) -> CPU(Partial)\r\n    # Databricks runtime: GPU(Final&Complete) -> CPU(PartialMerge)\r\n    'final|partialMerge&partial|final&complete',\r\n]\r\n```\r\n\r\nSo in this case, we want to keep on the GPU:\r\n\r\n- First case: PartialMerge (databricks) and Partial (apache)\r\n- Second case: Final or PartialMerge&Partial (for apache), and Final&Complete (databricks).\r\n\r\nAnd the rest of the aggregate executes on the CPU, which is great as we can show in the tests we can be compatible if part of the plan needs to execute on the CPU due to some operation we don't support yet.\r\n\r\nThe patterns are a bit convoluted here, and you have to go through the comments to understand what's going on. The proposal is to at least try and associate each pattern with a flavor of Spark, but ideally we can find some common patterns that can be prebaked and documented so we don't have to read a bunch of comments each time.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/919508757/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]