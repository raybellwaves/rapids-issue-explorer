[
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1942570913",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8921#issuecomment-1942570913",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8921",
        "id": 1942570913,
        "node_id": "IC_kwDOD7z77c5zyUeh",
        "user": {
            "login": "mattahrens",
            "id": 5303895,
            "node_id": "MDQ6VXNlcjUzMDM4OTU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5303895?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mattahrens",
            "html_url": "https://github.com/mattahrens",
            "followers_url": "https://api.github.com/users/mattahrens/followers",
            "following_url": "https://api.github.com/users/mattahrens/following{/other_user}",
            "gists_url": "https://api.github.com/users/mattahrens/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mattahrens/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mattahrens/subscriptions",
            "organizations_url": "https://api.github.com/users/mattahrens/orgs",
            "repos_url": "https://api.github.com/users/mattahrens/repos",
            "events_url": "https://api.github.com/users/mattahrens/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mattahrens/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-02-13T21:19:52Z",
        "updated_at": "2024-03-14T20:46:47Z",
        "author_association": "COLLABORATOR",
        "body": "Initial scope is understanding impact of fallback with benchmarks on Databricks 11.3/12.2/13.3.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1942570913/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2000372597",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8921#issuecomment-2000372597",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8921",
        "id": 2000372597,
        "node_id": "IC_kwDOD7z77c53O0N1",
        "user": {
            "login": "mattahrens",
            "id": 5303895,
            "node_id": "MDQ6VXNlcjUzMDM4OTU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5303895?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mattahrens",
            "html_url": "https://github.com/mattahrens",
            "followers_url": "https://api.github.com/users/mattahrens/followers",
            "following_url": "https://api.github.com/users/mattahrens/following{/other_user}",
            "gists_url": "https://api.github.com/users/mattahrens/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mattahrens/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mattahrens/subscriptions",
            "organizations_url": "https://api.github.com/users/mattahrens/orgs",
            "repos_url": "https://api.github.com/users/mattahrens/repos",
            "events_url": "https://api.github.com/users/mattahrens/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mattahrens/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-03-15T20:06:28Z",
        "updated_at": "2024-03-15T20:06:28Z",
        "author_association": "COLLABORATOR",
        "body": "NDS SF3K benchmark experiment results with `spark.sql.optimizer.runtime.bloomFilter.enabled` set to true (test) and false (baseline):\r\n\r\n```\r\n--------------------------------------------------------------------\r\nName = query16\r\nMeans = 4938.2, 2899.4\r\nTime diff = 2038.7999999999997\r\nSpeedup = 1.703179968269297\r\nT-Test (test statistic, p value, df) = 30.182426342750624, 1.5758462055072497e-09, 8.0\r\nT-Test Confidence Interval = 1883.0311702473427, 2194.5688297526567\r\nALERT: significant change has been detected (p-value < 0.05)\r\nALERT: improvement in performance has been observed\r\n--------------------------------------------------------------------\r\nName = query64\r\nMeans = 18665.8, 12114.6\r\nTime diff = 6551.199999999999\r\nSpeedup = 1.5407689894837633\r\nT-Test (test statistic, p value, df) = 48.586627207936644, 3.562824507885676e-11, 8.0\r\nT-Test Confidence Interval = 6240.268882580042, 6862.131117419955\r\nALERT: significant change has been detected (p-value < 0.05)\r\nALERT: improvement in performance has been observed\r\n--------------------------------------------------------------------\r\nName = query93\r\nMeans = 12480.4, 11776.6\r\nTime diff = 703.7999999999993\r\nSpeedup = 1.059762580031588\r\nT-Test (test statistic, p value, df) = 2.7663393196104678, 0.024434393189381686, 8.0\r\nT-Test Confidence Interval = 117.11647251971294, 1290.4835274802856\r\nALERT: significant change has been detected (p-value < 0.05)\r\nALERT: improvement in performance has been observed\r\n--------------------------------------------------------------------\r\nName = query94\r\nMeans = 5247.2, 3190.4\r\nTime diff = 2056.7999999999997\r\nSpeedup = 1.6446840521564694\r\nT-Test (test statistic, p value, df) = 36.89898739574463, 3.1911147346807857e-10, 8.0\r\nT-Test Confidence Interval = 1928.2601771027562, 2185.3398228972433\r\nALERT: significant change has been detected (p-value < 0.05)\r\nALERT: improvement in performance has been observed\r\n--------------------------------------------------------------------\r\nName = query95\r\nMeans = 8282.2, 6988.6\r\nTime diff = 1293.6000000000004\r\nSpeedup = 1.185101450934379\r\nT-Test (test statistic, p value, df) = 5.730056177701596, 0.0004389295644865668, 8.0\r\nT-Test Confidence Interval = 773.0035422047629, 1814.1964577952378\r\nALERT: significant change has been detected (p-value < 0.05)\r\nALERT: improvement in performance has been observed\r\n--------------------------------------------------------------------\r\nName = benchmark\r\nMeans = 441800.0, 429000.0\r\nTime diff = 12800.0\r\nSpeedup = 1.02983682983683\r\nT-Test (test statistic, p value, df) = 11.494739329713592, 2.973528840991338e-06, 8.0\r\nT-Test Confidence Interval = 10232.142471284506, 15367.857528715494\r\nALERT: significant change has been detected (p-value < 0.05)\r\nALERT: improvement in performance has been observed\r\n```\r\n\r\nOverall 3% improvement with the setting fully working and significant difference in queries 16, 64, 94, 95.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2000372597/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2000389291",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8921#issuecomment-2000389291",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8921",
        "id": 2000389291,
        "node_id": "IC_kwDOD7z77c53O4Sr",
        "user": {
            "login": "jlowe",
            "id": 1360766,
            "node_id": "MDQ6VXNlcjEzNjA3NjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1360766?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jlowe",
            "html_url": "https://github.com/jlowe",
            "followers_url": "https://api.github.com/users/jlowe/followers",
            "following_url": "https://api.github.com/users/jlowe/following{/other_user}",
            "gists_url": "https://api.github.com/users/jlowe/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jlowe/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jlowe/subscriptions",
            "organizations_url": "https://api.github.com/users/jlowe/orgs",
            "repos_url": "https://api.github.com/users/jlowe/repos",
            "events_url": "https://api.github.com/users/jlowe/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jlowe/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-03-15T20:21:30Z",
        "updated_at": "2024-03-15T20:21:30Z",
        "author_association": "MEMBER",
        "body": "@mattahrens significant speedup is expected with just that setting, since that's comparing non-Bloom filter joins vs. Bloom filter joins, with no GPU fallbacks in either case.\r\n\r\nFor the purposes of estimating the fallback cost of not implementing the new Bloom filter type, we should compare\r\n```\r\nspark.sql.optimizer.runtime.bloomFilter.enabled=true\r\n```\r\nas a baseline vs.\r\n```\r\nspark.sql.optimizer.runtime.bloomFilter.enabled=true\r\nspark.rapids.sql.expression.BloomFilterMightContain=false\r\nspark.rapids.sql.expression.BloomFilterAggregate=false\r\n```\r\n\r\nThis will compare Bloom filter joins with GPU acceleration vs. Bloom filter joins where the build and probe of the Bloom filter falls back to the CPU.  ",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2000389291/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2000620212",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8921#issuecomment-2000620212",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8921",
        "id": 2000620212,
        "node_id": "IC_kwDOD7z77c53Pwq0",
        "user": {
            "login": "mattahrens",
            "id": 5303895,
            "node_id": "MDQ6VXNlcjUzMDM4OTU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5303895?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mattahrens",
            "html_url": "https://github.com/mattahrens",
            "followers_url": "https://api.github.com/users/mattahrens/followers",
            "following_url": "https://api.github.com/users/mattahrens/following{/other_user}",
            "gists_url": "https://api.github.com/users/mattahrens/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mattahrens/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mattahrens/subscriptions",
            "organizations_url": "https://api.github.com/users/mattahrens/orgs",
            "repos_url": "https://api.github.com/users/mattahrens/repos",
            "events_url": "https://api.github.com/users/mattahrens/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mattahrens/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-03-15T23:22:59Z",
        "updated_at": "2024-03-15T23:22:59Z",
        "author_association": "COLLABORATOR",
        "body": "Ran that benchmark and it had a bigger impact (~6%): \r\n```\r\nName = benchmark\r\nMeans = 454600.0, 427800.0\r\nTime diff = 26800.0\r\nSpeedup = 1.0626460963066853\r\nT-Test (test statistic, p value, df) = 23.50515491742838, 1.1413900109260772e-08, 8.0\r\nT-Test Confidence Interval = 24170.750755057958, 29429.249244942042\r\nALERT: significant change has been detected (p-value < 0.05)\r\nALERT: improvement in performance has been observed\r\n```\r\n\r\nRegressions noted in queries 13, 16, 64, 80, 94, 95.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2000620212/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]