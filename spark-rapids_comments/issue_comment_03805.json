[
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/950656647",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3805#issuecomment-950656647",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3805",
        "id": 950656647,
        "node_id": "IC_kwDOD7z77c44qd6H",
        "user": {
            "login": "zhanga5",
            "id": 13271672,
            "node_id": "MDQ6VXNlcjEzMjcxNjcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13271672?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zhanga5",
            "html_url": "https://github.com/zhanga5",
            "followers_url": "https://api.github.com/users/zhanga5/followers",
            "following_url": "https://api.github.com/users/zhanga5/following{/other_user}",
            "gists_url": "https://api.github.com/users/zhanga5/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zhanga5/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zhanga5/subscriptions",
            "organizations_url": "https://api.github.com/users/zhanga5/orgs",
            "repos_url": "https://api.github.com/users/zhanga5/repos",
            "events_url": "https://api.github.com/users/zhanga5/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zhanga5/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-25T08:24:09Z",
        "updated_at": "2021-10-25T08:24:09Z",
        "author_association": "CONTRIBUTOR",
        "body": "tried to test parallel build within premerge CI test, however, two issues are encountered as following:\r\n1. build failure (parallel=4)\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-install-plugin:2.4:install (default-install) on project rapids-4-spark-udf_2.12: Failed to install metadata com.nvidia:rapids-4-spark-udf_2.12:21.12.0-SNAPSHOT/maven-metadata.xml: Could not parse metadata /root/.m2/repository/com/nvidia/rapids-4-spark-udf_2.12/21.12.0-SNAPSHOT/maven-metadata-local.xml: in epilog non whitespace content is not allowed but got p (position: END_TAG seen ...</metadata>\\np... @20:2) -> [Help 1]\r\n``` \r\nNote, this issue can be workarounded if build one single version first before parallel build other versions. Maybe it's related with `.m2` cache, that's always need setup during build for premerge job. \r\n\r\n2. test failure (parallel=4)\r\n```\r\n[ERROR] Failed to execute goal org.scalatest:scalatest-maven-plugin:2.0.2:test (test) on project rapids-4-spark-tests_2.12: There are test failures -> [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.scalatest:scalatest-maven-plugin:2.0.2:test (test) on project rapids-4-spark-tests_2.12: There are test failures\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\r\nCaused by: org.apache.maven.plugin.MojoFailureException: There are test failures\r\n    at org.scalatest.tools.maven.TestMojo.execute (TestMojo.java:109)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:498)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\r\n```\r\nPlease refer to testing PR https://github.com/pxLi/spark-rapids/pull/216/commits/fb0ba4c127bdea8fa10d491f4e75da8fdb6048a1 for more details. This issue can be reproduced with the script provided in the [PR](https://github.com/pxLi/spark-rapids/pull/216/commits/fb0ba4c127bdea8fa10d491f4e75da8fdb6048a1) as following steps:\r\n```\r\nexport URM_URL=\"<please_replace_with_real_urm_url>\"\r\nexport WORKSPACE=`pwd`\r\nexport MVN_URM_MIRROR='-s jenkins/settings.xml -P mirror-apache-to-urm'\r\nexport CUDA_CLASSIFIER='cuda11'\r\nexport LIBCUDF_KERNEL_CACHE_PATH=`pwd`/.cudf\r\nexport CUDF_VER=21.12.0-SNAPSHOT\r\nexport PROJECT_VER=21.12.0-SNAPSHOT\r\nexport PROJECT_TEST_VER=21.12.0-SNAPSHOT\r\njenkins/spark-premerge-build.sh mvn_verify\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/950656647/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/951773138",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3805#issuecomment-951773138",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3805",
        "id": 951773138,
        "node_id": "IC_kwDOD7z77c44uufS",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-26T09:53:09Z",
        "updated_at": "2021-10-26T09:53:09Z",
        "author_association": "COLLABORATOR",
        "body": "I've seen this once and ended up deleting metadata-local.xml. I googled around and it looks like there is not concurrency control on the metadata file containing the information about classifiers.\r\n\r\n1. https://www.mail-archive.com/geoserver-devel@lists.sourceforge.net/msg46922.html\r\n2. http://mail-archives.apache.org/mod_mbox/hadoop-common-issues/202008.mbox/%3CJIRA.13320926.1596566600000.169602.1596568500110@Atlassian.JIRA%3E\r\n3. https://www.mail-archive.com/users@maven.apache.org/msg141457.html\r\n\r\nseparate local m2 per executor of something like  https://github.com/takari/takari-local-repository could be solutions",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/951773138/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/952259487",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3805#issuecomment-952259487",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3805",
        "id": 952259487,
        "node_id": "IC_kwDOD7z77c44wlOf",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-26T19:40:58Z",
        "updated_at": "2021-10-26T19:40:58Z",
        "author_association": "COLLABORATOR",
        "body": "Another idea : I don't think we need any artifacts installed but the aggregator jars. So if we could run just package in parallel, and then single-thread to install-file aggregator jars. ",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/952259487/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/953536687",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3805#issuecomment-953536687",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3805",
        "id": 953536687,
        "node_id": "IC_kwDOD7z77c441dCv",
        "user": {
            "login": "zhanga5",
            "id": 13271672,
            "node_id": "MDQ6VXNlcjEzMjcxNjcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13271672?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zhanga5",
            "html_url": "https://github.com/zhanga5",
            "followers_url": "https://api.github.com/users/zhanga5/followers",
            "following_url": "https://api.github.com/users/zhanga5/following{/other_user}",
            "gists_url": "https://api.github.com/users/zhanga5/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zhanga5/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zhanga5/subscriptions",
            "organizations_url": "https://api.github.com/users/zhanga5/orgs",
            "repos_url": "https://api.github.com/users/zhanga5/repos",
            "events_url": "https://api.github.com/users/zhanga5/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zhanga5/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-28T06:20:04Z",
        "updated_at": "2021-10-28T06:20:04Z",
        "author_association": "CONTRIBUTOR",
        "body": "in fact, build one version took ~2 mins, while unit test took ~15mins for premerge ci job. Currently we build 6 versions and 2 versions (311, 320) that's enabled unit test. It means only ~10mins would be saved if introduce parallel build + serialized unit test. The more reasonable option would be run two versions unit test from different k8s pods for best parallelism, however, there's no much resource available currently. We already applied two k8s pods for premerge job for parallel integration test. Hopefully, more resource could be applied in the future then add parallel unit tests.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/953536687/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/953538501",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3805#issuecomment-953538501",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3805",
        "id": 953538501,
        "node_id": "IC_kwDOD7z77c441dfF",
        "user": {
            "login": "zhanga5",
            "id": 13271672,
            "node_id": "MDQ6VXNlcjEzMjcxNjcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13271672?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zhanga5",
            "html_url": "https://github.com/zhanga5",
            "followers_url": "https://api.github.com/users/zhanga5/followers",
            "following_url": "https://api.github.com/users/zhanga5/following{/other_user}",
            "gists_url": "https://api.github.com/users/zhanga5/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zhanga5/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zhanga5/subscriptions",
            "organizations_url": "https://api.github.com/users/zhanga5/orgs",
            "repos_url": "https://api.github.com/users/zhanga5/repos",
            "events_url": "https://api.github.com/users/zhanga5/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zhanga5/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-28T06:23:46Z",
        "updated_at": "2021-10-28T06:23:46Z",
        "author_association": "CONTRIBUTOR",
        "body": "> \r\n> separate local m2 per executor of something like https://github.com/takari/takari-local-repository could be solutions\r\n\r\ntest this maven plugin indicated the first issue 1 (build failure) mentioned at above can be solved, however, still encountered issue 2 (test failure) with same error symptom.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/953538501/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/954982824",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3805#issuecomment-954982824",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3805",
        "id": 954982824,
        "node_id": "IC_kwDOD7z77c446-Go",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-29T19:07:13Z",
        "updated_at": "2021-10-29T19:08:00Z",
        "author_association": "COLLABORATOR",
        "body": "The fact that the tests are not enabled for all versions is a tradeoff between wanting to run it for all and the time it takes to get a premege check on  a PR. If all shims are in the parallel CI stages we can enable them for all versions",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/954982824/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/955953991",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/3805#issuecomment-955953991",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/3805",
        "id": 955953991,
        "node_id": "IC_kwDOD7z77c44-rNH",
        "user": {
            "login": "pxLi",
            "id": 8086184,
            "node_id": "MDQ6VXNlcjgwODYxODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8086184?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pxLi",
            "html_url": "https://github.com/pxLi",
            "followers_url": "https://api.github.com/users/pxLi/followers",
            "following_url": "https://api.github.com/users/pxLi/following{/other_user}",
            "gists_url": "https://api.github.com/users/pxLi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pxLi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pxLi/subscriptions",
            "organizations_url": "https://api.github.com/users/pxLi/orgs",
            "repos_url": "https://api.github.com/users/pxLi/repos",
            "events_url": "https://api.github.com/users/pxLi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pxLi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-01T05:56:04Z",
        "updated_at": "2021-11-01T05:56:04Z",
        "author_association": "COLLABORATOR",
        "body": "We can get back to this when we have enough GPU resources (planning resources for next year)\r\n\r\nremoved from Release 21.12 for now. This CI feature should not block specific plugin release",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/955953991/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]