[
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1207752588",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1207752588",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1207752588,
        "node_id": "IC_kwDOD7z77c5H_NeM",
        "user": {
            "login": "pxLi",
            "id": 8086184,
            "node_id": "MDQ6VXNlcjgwODYxODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8086184?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pxLi",
            "html_url": "https://github.com/pxLi",
            "followers_url": "https://api.github.com/users/pxLi/followers",
            "following_url": "https://api.github.com/users/pxLi/following{/other_user}",
            "gists_url": "https://api.github.com/users/pxLi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pxLi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pxLi/subscriptions",
            "organizations_url": "https://api.github.com/users/pxLi/orgs",
            "repos_url": "https://api.github.com/users/pxLi/repos",
            "events_url": "https://api.github.com/users/pxLi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pxLi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-08T07:12:17Z",
        "updated_at": "2022-08-08T07:12:17Z",
        "author_association": "COLLABORATOR",
        "body": "@NvTimLiu to help investigate if any good solution, thanks~",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1207752588/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1212627623",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1212627623",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1212627623,
        "node_id": "IC_kwDOD7z77c5IRzqn",
        "user": {
            "login": "NvTimLiu",
            "id": 50287591,
            "node_id": "MDQ6VXNlcjUwMjg3NTkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/50287591?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NvTimLiu",
            "html_url": "https://github.com/NvTimLiu",
            "followers_url": "https://api.github.com/users/NvTimLiu/followers",
            "following_url": "https://api.github.com/users/NvTimLiu/following{/other_user}",
            "gists_url": "https://api.github.com/users/NvTimLiu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NvTimLiu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NvTimLiu/subscriptions",
            "organizations_url": "https://api.github.com/users/NvTimLiu/orgs",
            "repos_url": "https://api.github.com/users/NvTimLiu/repos",
            "events_url": "https://api.github.com/users/NvTimLiu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NvTimLiu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-12T00:51:16Z",
        "updated_at": "2022-08-12T00:51:16Z",
        "author_association": "COLLABORATOR",
        "body": "There are some variables need to be initialized, checking",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1212627623/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1216590170",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1216590170",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1216590170,
        "node_id": "IC_kwDOD7z77c5Ig7Fa",
        "user": {
            "login": "NvTimLiu",
            "id": 50287591,
            "node_id": "MDQ6VXNlcjUwMjg3NTkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/50287591?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NvTimLiu",
            "html_url": "https://github.com/NvTimLiu",
            "followers_url": "https://api.github.com/users/NvTimLiu/followers",
            "following_url": "https://api.github.com/users/NvTimLiu/following{/other_user}",
            "gists_url": "https://api.github.com/users/NvTimLiu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NvTimLiu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NvTimLiu/subscriptions",
            "organizations_url": "https://api.github.com/users/NvTimLiu/orgs",
            "repos_url": "https://api.github.com/users/NvTimLiu/repos",
            "events_url": "https://api.github.com/users/NvTimLiu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NvTimLiu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-16T12:47:30Z",
        "updated_at": "2022-08-16T12:47:30Z",
        "author_association": "COLLABORATOR",
        "body": "To run `spark-nightly-build.sh` , you need to install build environment on your host as described in: \r\n https://github.com/NVIDIA/spark-rapids/blob/branch-22.10/jenkins/Dockerfile-blossom.ubuntu\r\n\r\nTo run `spark-tests.sh` ,  you need to install build environment on your host as described in (similar for centos/rocky): \r\nhttps://github.com/NVIDIA/spark-rapids/blob/branch-22.10/jenkins/Dockerfile-blossom.integration.ubuntu\r\nI mean not building jars head with `spark-nightly-build.sh` \r\n\r\nThe best practice is to build out the docker images with the docker files, the run build/test inside the docker images.\r\n\r\n\r\nI could SUCCESSFULLY run both the nightly scripts locally.\r\n\r\nhttps://github.com/NVIDIA/spark-rapids/blob/branch-22.10/jenkins/spark-nightly-build.sh\r\nhttps://github.com/NVIDIA/spark-rapids/blob/branch-22.10/jenkins/spark-tests.sh\r\n\r\nTo run `spark-tests.sh`, you need to build jars with `spark-nightly-build.sh` ahead, then you will get the test SNAPSHOT jars locally. The best practice is to run `spark-nightly-build.sh` scripts in the test docker container (e.g. building from `jenkins/Dockerfile-blossom.integration.ubuntu`), the run the `spark-tests.sh` in the same container.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1216590170/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1221853549",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1221853549",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1221853549,
        "node_id": "IC_kwDOD7z77c5I1AFt",
        "user": {
            "login": "NvTimLiu",
            "id": 50287591,
            "node_id": "MDQ6VXNlcjUwMjg3NTkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/50287591?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NvTimLiu",
            "html_url": "https://github.com/NvTimLiu",
            "followers_url": "https://api.github.com/users/NvTimLiu/followers",
            "following_url": "https://api.github.com/users/NvTimLiu/following{/other_user}",
            "gists_url": "https://api.github.com/users/NvTimLiu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NvTimLiu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NvTimLiu/subscriptions",
            "organizations_url": "https://api.github.com/users/NvTimLiu/orgs",
            "repos_url": "https://api.github.com/users/NvTimLiu/repos",
            "events_url": "https://api.github.com/users/NvTimLiu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NvTimLiu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-22T05:33:17Z",
        "updated_at": "2022-08-22T05:33:17Z",
        "author_association": "COLLABORATOR",
        "body": "For `spark-nightly-build.sh`, Need to set `SKIP_DEPLOY=true` to avoid pushing jars maven repo.\r\n\r\nFor `spark-tests.sh`, need to change to dowload spark binary from spark public archive webpage.\r\n\r\nhttps://github.com/NVIDIA/spark-rapids/blob/branch-22.10/jenkins/spark-tests.sh#L99-L100",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1221853549/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1222182063",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1222182063",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1222182063,
        "node_id": "IC_kwDOD7z77c5I2QSv",
        "user": {
            "login": "NvTimLiu",
            "id": 50287591,
            "node_id": "MDQ6VXNlcjUwMjg3NTkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/50287591?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NvTimLiu",
            "html_url": "https://github.com/NvTimLiu",
            "followers_url": "https://api.github.com/users/NvTimLiu/followers",
            "following_url": "https://api.github.com/users/NvTimLiu/following{/other_user}",
            "gists_url": "https://api.github.com/users/NvTimLiu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NvTimLiu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NvTimLiu/subscriptions",
            "organizations_url": "https://api.github.com/users/NvTimLiu/orgs",
            "repos_url": "https://api.github.com/users/NvTimLiu/repos",
            "events_url": "https://api.github.com/users/NvTimLiu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NvTimLiu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-22T10:49:24Z",
        "updated_at": "2022-08-22T10:49:24Z",
        "author_association": "COLLABORATOR",
        "body": "The build/test scripts takes long to to finish.\r\n\r\nThe build scripts `spark-nightly-build.sh` take 6 hours.\r\n\r\nThe test scripts `spark-tests`  takes 2 hours X one spark shims, all the tests with 8 shims will take a whole day if we run it one my local host with one GPU card.\r\n\r\n@gerashegalov I was told this issue/requirement was originated from you, could you please help to check if the above conclusions  what we expected?",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1222182063/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1222496986",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1222496986",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1222496986,
        "node_id": "IC_kwDOD7z77c5I3dLa",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-22T15:11:42Z",
        "updated_at": "2022-08-23T13:10:12Z",
        "author_association": "COLLABORATOR",
        "body": "Hi @NvTimLiu ,\r\n\r\nI have recently had two scenarios. \r\n\r\n1. An invasive PR I knew will pass premerge but would fail an unidentified set of integration tests in nightly tests.\r\n2. A PR that fails a single premerge test on CI and when I rerun it with the same command line locally it will pass. I could repro only after editing a bunch of lines in the script to run it in a local container and it finally reproduced the issue reliably\r\n\r\nFor Scenario 1: Knowing that running all nightly tests *locally* takes a long time I'd like to be able to  submit a CI job to run all nightly tests before I merge the PR \r\n\r\nNow suppose some test failed in that CI job which is like Scenario 2. Then I want to run this single test locally the same way as CI to reproduce the failure \r\n```bash\r\ndocker run --gpus all -it <ci-image> <repro-command-for-a-failing-test> \r\n```\r\n\r\nBonus points if the above command would mount my local repo for quick iterations without requiring local commits.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1222496986/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1224048732",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1224048732",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1224048732,
        "node_id": "IC_kwDOD7z77c5I9YBc",
        "user": {
            "login": "NvTimLiu",
            "id": 50287591,
            "node_id": "MDQ6VXNlcjUwMjg3NTkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/50287591?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NvTimLiu",
            "html_url": "https://github.com/NvTimLiu",
            "followers_url": "https://api.github.com/users/NvTimLiu/followers",
            "following_url": "https://api.github.com/users/NvTimLiu/following{/other_user}",
            "gists_url": "https://api.github.com/users/NvTimLiu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NvTimLiu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NvTimLiu/subscriptions",
            "organizations_url": "https://api.github.com/users/NvTimLiu/orgs",
            "repos_url": "https://api.github.com/users/NvTimLiu/repos",
            "events_url": "https://api.github.com/users/NvTimLiu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NvTimLiu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-23T13:06:02Z",
        "updated_at": "2022-08-23T13:06:02Z",
        "author_association": "COLLABORATOR",
        "body": "Hi @gerashegalov \r\nI got your scenarios,\r\nFor scenario 1, the nightly BUILD+TESTs CI process is pretty complicated, and takes a lot of time and CPU/GPU resources,  due to the \"dependencies and downstream triggers of `spark-rapids-JNI(1.5h)`/`DB build(2h)`/`nightly build(6h)`/`nightly tests [x7 GPUs parallelly] (2h)`\".   \r\nIn a word, we do not have enough resources to trigger extra nightly CI jobs besides the regular one. \r\n\r\nFor scenario 2, it is practical, we can load the FAILURE workspace into the premerge docker container to quick restore the test environment, let me try this first.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1224048732/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1225273823",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1225273823",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1225273823,
        "node_id": "IC_kwDOD7z77c5JCDHf",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-24T06:50:08Z",
        "updated_at": "2022-08-24T06:50:08Z",
        "author_association": "COLLABORATOR",
        "body": "It's not ideal for but the resource problem can be mitigated by batching multiple PRs. \r\nLet us say we have a GitHub PR label `ready-for-nightly` or something like that. And there are a few scheduled daily/nightly CI jobs trying to merge as many of such PRs into a test branch as possible with a merge conflict. Then it executes a single nightly test run in CI against that cumulative test branch. ",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1225273823/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1229623030",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1229623030",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1229623030,
        "node_id": "IC_kwDOD7z77c5JSo72",
        "user": {
            "login": "NvTimLiu",
            "id": 50287591,
            "node_id": "MDQ6VXNlcjUwMjg3NTkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/50287591?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NvTimLiu",
            "html_url": "https://github.com/NvTimLiu",
            "followers_url": "https://api.github.com/users/NvTimLiu/followers",
            "following_url": "https://api.github.com/users/NvTimLiu/following{/other_user}",
            "gists_url": "https://api.github.com/users/NvTimLiu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NvTimLiu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NvTimLiu/subscriptions",
            "organizations_url": "https://api.github.com/users/NvTimLiu/orgs",
            "repos_url": "https://api.github.com/users/NvTimLiu/repos",
            "events_url": "https://api.github.com/users/NvTimLiu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NvTimLiu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-29T01:18:36Z",
        "updated_at": "2022-08-29T01:18:36Z",
        "author_association": "COLLABORATOR",
        "body": "This is a practical way if we aggregate/merge several  `ready-for-nightly` PRs together, then run the nightly CI, a single nightly test run in CI against that cumulative test branch.\r\n\r\nBYW,  does `a single nightly test run`  mean we and run tests against one spark-version, or all the spark-versions? @gerashegalov ",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1229623030/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1229925922",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1229925922",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1229925922,
        "node_id": "IC_kwDOD7z77c5JTy4i",
        "user": {
            "login": "GaryShen2008",
            "id": 22128535,
            "node_id": "MDQ6VXNlcjIyMTI4NTM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/22128535?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GaryShen2008",
            "html_url": "https://github.com/GaryShen2008",
            "followers_url": "https://api.github.com/users/GaryShen2008/followers",
            "following_url": "https://api.github.com/users/GaryShen2008/following{/other_user}",
            "gists_url": "https://api.github.com/users/GaryShen2008/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GaryShen2008/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GaryShen2008/subscriptions",
            "organizations_url": "https://api.github.com/users/GaryShen2008/orgs",
            "repos_url": "https://api.github.com/users/GaryShen2008/repos",
            "events_url": "https://api.github.com/users/GaryShen2008/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GaryShen2008/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-29T08:07:30Z",
        "updated_at": "2022-08-29T08:07:30Z",
        "author_association": "COLLABORATOR",
        "body": "> It's not ideal for but the resource problem can be mitigated by batching multiple PRs. Let us say we have a GitHub PR label `ready-for-nightly` or something like that. And there are a few scheduled daily/nightly CI jobs trying to merge as many of such PRs into a test branch as possible with a merge conflict. Then it executes a single nightly test run in CI against that cumulative test branch.\r\n\r\nWe have the resource problem that we don't run full testing in the pre-merge pipeline.\r\nAnd the full test pipeline(like nightly build to nightly IT) takes a long time.\r\nI don't think we should spend time to add another pipeline to support 'ready-for-nightly'. If we think a frequent full testing is required, we can simply change the nightly build & test more frequently like every 12 hours or less to detect the problem. \r\n\r\nI'd like to encourage developers to run the testing locally before merging the PR. For example, we know the pre-merge will run IT with which version of spark. And the developers should run the others if it's not covered by pre-merge and we know it should run.\r\nShould the problem be how easy a developer can run IT locally against some versions of spark?",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1229925922/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1230640580",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1230640580",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1230640580,
        "node_id": "IC_kwDOD7z77c5JWhXE",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-29T17:41:17Z",
        "updated_at": "2022-08-29T17:41:17Z",
        "author_association": "COLLABORATOR",
        "body": "@GaryShen2008 Running locally is a practice with major deficiencies \r\n1. Practice shows there are always non-trivial discrepancies in the local environment and the CI in terms of hardware, OS, NVIDIA driver versions, a bunch of environment variables that affect the test execution. In my experience, there is always a non-negligible chance that the test suite passing locally will fail on CI\r\n\r\n2. Running locally is also much more expensive considering that it takes away from developer's productivity.  \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1230640580/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1232471380",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1232471380",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1232471380,
        "node_id": "IC_kwDOD7z77c5JdgVU",
        "user": {
            "login": "pxLi",
            "id": 8086184,
            "node_id": "MDQ6VXNlcjgwODYxODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8086184?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pxLi",
            "html_url": "https://github.com/pxLi",
            "followers_url": "https://api.github.com/users/pxLi/followers",
            "following_url": "https://api.github.com/users/pxLi/following{/other_user}",
            "gists_url": "https://api.github.com/users/pxLi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pxLi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pxLi/subscriptions",
            "organizations_url": "https://api.github.com/users/pxLi/orgs",
            "repos_url": "https://api.github.com/users/pxLi/repos",
            "events_url": "https://api.github.com/users/pxLi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pxLi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-31T05:12:20Z",
        "updated_at": "2022-08-31T05:20:28Z",
        "author_association": "COLLABORATOR",
        "body": "I think we may just wait for more resources to get ready. \r\nTemp workarounds can not completely fulfill the requirements here, and would spend us much time developing and mainly maintenance efforts\r\n\r\n> Let us say we have a GitHub PR label ready-for-nightly or something like that. And there are a few scheduled daily/nightly CI jobs trying to merge as many of such PRs into a test branch as possible with a merge conflict. Then it executes a single nightly test run in CI against that cumulative test branch.\r\n\r\nthis sounds like it may introduce more chaos to pre-merge phase. I am not sure if any other projects have some successful cases w/ it",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1232471380/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1234633227",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1234633227",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1234633227,
        "node_id": "IC_kwDOD7z77c5JlwIL",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-01T18:24:41Z",
        "updated_at": "2022-09-01T18:24:41Z",
        "author_association": "COLLABORATOR",
        "body": "I am pretty sure it's not going to be a temporary workaround but a reasonable feature because the struggle for resources is a constant you can bet on in my view. So this is a future proof generic feature that covers a range of situations with n=1 for some rare PRs where you want/must to test in isolation or > 1 for the normal case where PRs can be easily pooled together for testing.\r\n\r\n> this sounds like it may introduce more chaos to pre-merge phase. \r\n\r\nI don't see how you can make this conclusion.  How is premerge going to be affected by a single/few (based on the acceptable and approved cadence) runs a day? That's a whole point of batching PRs.\r\n\r\n> I am not sure if any other projects have some successful cases w/ it\r\n\r\nUnique problems require unique solutions. But I don't think it's that unique.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1234633227/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1234949652",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1234949652",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1234949652,
        "node_id": "IC_kwDOD7z77c5Jm9YU",
        "user": {
            "login": "pxLi",
            "id": 8086184,
            "node_id": "MDQ6VXNlcjgwODYxODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8086184?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pxLi",
            "html_url": "https://github.com/pxLi",
            "followers_url": "https://api.github.com/users/pxLi/followers",
            "following_url": "https://api.github.com/users/pxLi/following{/other_user}",
            "gists_url": "https://api.github.com/users/pxLi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pxLi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pxLi/subscriptions",
            "organizations_url": "https://api.github.com/users/pxLi/orgs",
            "repos_url": "https://api.github.com/users/pxLi/repos",
            "events_url": "https://api.github.com/users/pxLi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pxLi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-02T00:54:27Z",
        "updated_at": "2022-09-02T00:54:44Z",
        "author_association": "COLLABORATOR",
        "body": "> I don't see how you can make this conclusion. How is premerge going to be affected by a single/few (based on the acceptable and approved cadence) runs a day? That's a whole point of batching PRs.\r\n\r\n1. It the test passed, everything is fine. But if failures, people would spend much more time investigating errors as the increased complexity of debugging in REF of multiple merged commits. Even there is actually no fault in their own PRs, but the merged REF CI run would block their merge\r\n2. Current nightly CIs do the same job IMO, I do not see any huge benefit to put it as pre-merge\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1234949652/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1235010959",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/6252#issuecomment-1235010959",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/6252",
        "id": 1235010959,
        "node_id": "IC_kwDOD7z77c5JnMWP",
        "user": {
            "login": "gerashegalov",
            "id": 3187938,
            "node_id": "MDQ6VXNlcjMxODc5Mzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3187938?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gerashegalov",
            "html_url": "https://github.com/gerashegalov",
            "followers_url": "https://api.github.com/users/gerashegalov/followers",
            "following_url": "https://api.github.com/users/gerashegalov/following{/other_user}",
            "gists_url": "https://api.github.com/users/gerashegalov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gerashegalov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gerashegalov/subscriptions",
            "organizations_url": "https://api.github.com/users/gerashegalov/orgs",
            "repos_url": "https://api.github.com/users/gerashegalov/repos",
            "events_url": "https://api.github.com/users/gerashegalov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gerashegalov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-02T02:51:33Z",
        "updated_at": "2022-09-02T02:51:33Z",
        "author_association": "COLLABORATOR",
        "body": "1. yes that's a trade off. You can control by limiting the number of PRs. \r\n2. We are not talking about making it a mandatory premerge. My proposal is to provide to developers as an option.\r\n\r\nOur test code and script is full of places making the local test environment different from CI. \r\nRecent examples are\r\n- https://github.com/NVIDIA/spark-rapids/pull/6358#issuecomment-1220970470\r\n- https://github.com/NVIDIA/spark-rapids/issues/5714\r\n- https://github.com/NVIDIA/spark-rapids/issues/6444\r\n\r\nAfter running a test locally with success. and you merged the PR, moved on to new tasks, chances are high that nightly tests will come with a bunch of problems incurring high mental context switch cost.\r\n\r\nThere are two solution avenues to this problem:\r\n1. Make the the tests more deterministic and close the gap between CI and local. I think this is very difficult to achieve based on the vast differences in hardware and the time it will take to remove nondeterminism from the test code, and preventing it from being reintroduce.\r\n2.  Accept the nondeterminism, allow developers to run tests on the CI before checking in to minimize incurred tech debt . For complex PRs I'd rather wait for a few days before merging them but have much higher confidence that the project is actually DONE.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1235010959/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]