[
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2099261088",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/10772#issuecomment-2099261088",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10772",
        "id": 2099261088,
        "node_id": "IC_kwDOD7z77c59IC6g",
        "user": {
            "login": "mattahrens",
            "id": 5303895,
            "node_id": "MDQ6VXNlcjUzMDM4OTU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5303895?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mattahrens",
            "html_url": "https://github.com/mattahrens",
            "followers_url": "https://api.github.com/users/mattahrens/followers",
            "following_url": "https://api.github.com/users/mattahrens/following{/other_user}",
            "gists_url": "https://api.github.com/users/mattahrens/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mattahrens/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mattahrens/subscriptions",
            "organizations_url": "https://api.github.com/users/mattahrens/orgs",
            "repos_url": "https://api.github.com/users/mattahrens/repos",
            "events_url": "https://api.github.com/users/mattahrens/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mattahrens/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-05-07T20:33:12Z",
        "updated_at": "2024-05-07T20:33:12Z",
        "author_association": "COLLABORATOR",
        "body": "Initial scope is triaging unit test failures to determine priorities of individual issues.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2099261088/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2127883137",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/10772#issuecomment-2127883137",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10772",
        "id": 2127883137,
        "node_id": "IC_kwDOD7z77c5-1OuB",
        "user": {
            "login": "abellina",
            "id": 1901059,
            "node_id": "MDQ6VXNlcjE5MDEwNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1901059?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/abellina",
            "html_url": "https://github.com/abellina",
            "followers_url": "https://api.github.com/users/abellina/followers",
            "following_url": "https://api.github.com/users/abellina/following{/other_user}",
            "gists_url": "https://api.github.com/users/abellina/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/abellina/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/abellina/subscriptions",
            "organizations_url": "https://api.github.com/users/abellina/orgs",
            "repos_url": "https://api.github.com/users/abellina/repos",
            "events_url": "https://api.github.com/users/abellina/events{/privacy}",
            "received_events_url": "https://api.github.com/users/abellina/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-05-23T19:31:08Z",
        "updated_at": "2024-05-23T19:31:08Z",
        "author_association": "COLLABORATOR",
        "body": "I actually see 5 test failures, not 6. I even tried the @NVnavkumar recommended, so one of the tests marked as `except` is passing fine:\n\n```\n- SPARK-24788: RelationalGroupedDataset.toString with unresolved exprs should not fail\n```\n\nThe other 5 are failing with what looks like  array sort differences:\n\n```\ncollect functions *** FAILED ***\n!struct<>                     struct<collect_set(a):array<int>,collect_set(b):array<int>>\n![List(1, 2, 3),List(2, 4)]   [ArrayBuffer(2, 1, 3),ArrayBuffer(4, 2)] (RapidsSQLTestsTrait.scala:99)\n``` \n\n```\ncollect functions structs *** FAILED ***\n!== Correct Answer - 1 ==             == RAPIDS Answer - 1 ==\n!struct<>                             struct<collect_set(a):array<int>,sort_array(collect_set(b), true):array<struct<x:int,y:int>>>\n![List(1, 2, 3),List([2,2], [4,1])]   [ArrayBuffer(2, 1, 3),ArrayBuffer([2,2], [4,1])] (RapidsSQLTestsTrait.scala:99)\n```\n\n```\nSPARK-17641: collect functions should not collect null values *** FAILED ***\n!== Correct Answer - 1 ==   == RAPIDS Answer - 1 ==\n!struct<>                   struct<collect_set(a):array<string>,collect_set(b):array<int>>\n![List(1),List(2, 4)]       [ArrayBuffer(1),ArrayBuffer(4, 2)] (RapidsSQLTestsTrait.scala:99)\n```\n\n```\ncollect functions should be able to cast to array type with no null values *** FAILED ***\n!== Correct Answer - 1 ==   == RAPIDS Answer - 1 ==\n!struct<>                   struct<collect_set(a):array<float>>\n![List(1.0, 2.0)]           [ArrayBuffer(2.0, 1.0)] (RapidsSQLTestsTrait.scala:99)\n```\n\nand this last one seems to be something that we probably don't do the same on the GPU and I don't know if it matters yet.\n\n```\nSPARK-19471: AggregationIterator does not initialize the generated result projection before using it *** FAILED ***\nDataFrameAggregateSuite.this.find(hashAggPlan)(((x0$1: org.apache.spark.sql.execution.SparkPlan) => x0$1 match {\n  case (child: org.apache.spark.sql.execution.SparkPlan)(codegenStageId: Int) org.apache.spark.sql.execution.WholeStageCodegenExec((_: org.apache.spark.sql.execution.aggregate.HashAggregateExec)) => true\ncase _ => false\n})).isDefined was false (DataFrameAggregateSuite.scala:691)\n```\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2127883137/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2129866825",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/10772#issuecomment-2129866825",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10772",
        "id": 2129866825,
        "node_id": "IC_kwDOD7z77c5-8zBJ",
        "user": {
            "login": "abellina",
            "id": 1901059,
            "node_id": "MDQ6VXNlcjE5MDEwNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1901059?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/abellina",
            "html_url": "https://github.com/abellina",
            "followers_url": "https://api.github.com/users/abellina/followers",
            "following_url": "https://api.github.com/users/abellina/following{/other_user}",
            "gists_url": "https://api.github.com/users/abellina/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/abellina/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/abellina/subscriptions",
            "organizations_url": "https://api.github.com/users/abellina/orgs",
            "repos_url": "https://api.github.com/users/abellina/repos",
            "events_url": "https://api.github.com/users/abellina/events{/privacy}",
            "received_events_url": "https://api.github.com/users/abellina/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-05-24T15:47:36Z",
        "updated_at": "2024-05-24T15:47:36Z",
        "author_association": "COLLABORATOR",
        "body": "Ok the last test is invalid. It's looking for `HashAggregateExec` specifically and we replace this, so we need to skip this test.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2129866825/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2129888336",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/10772#issuecomment-2129888336",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10772",
        "id": 2129888336,
        "node_id": "IC_kwDOD7z77c5-84RQ",
        "user": {
            "login": "abellina",
            "id": 1901059,
            "node_id": "MDQ6VXNlcjE5MDEwNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1901059?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/abellina",
            "html_url": "https://github.com/abellina",
            "followers_url": "https://api.github.com/users/abellina/followers",
            "following_url": "https://api.github.com/users/abellina/following{/other_user}",
            "gists_url": "https://api.github.com/users/abellina/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/abellina/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/abellina/subscriptions",
            "organizations_url": "https://api.github.com/users/abellina/orgs",
            "repos_url": "https://api.github.com/users/abellina/repos",
            "events_url": "https://api.github.com/users/abellina/events{/privacy}",
            "received_events_url": "https://api.github.com/users/abellina/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-05-24T16:00:17Z",
        "updated_at": "2024-05-24T16:08:58Z",
        "author_association": "COLLABORATOR",
        "body": "From the documentation of `collect_set`:\r\n\r\n> The function is non-deterministic because the order of collected results depends on the order of the rows which may be non-deterministic after a shuffle.\r\n\r\n`collect functions structs` uses `sort_array` for the second column `b` but not for the first column. The test fails because `a` is not matching, and that's not sorted.\r\n\r\nI think the problem is that we need to have a way to sort the arrays. That said, I don't see consistent use or lack of use of `sort_array` from spar's side, so I don't think we can enable these tests.. unless we just ported them over. @binmahone.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2129888336/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2132495549",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/10772#issuecomment-2132495549",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10772",
        "id": 2132495549,
        "node_id": "IC_kwDOD7z77c5_G0y9",
        "user": {
            "login": "binmahone",
            "id": 6416599,
            "node_id": "MDQ6VXNlcjY0MTY1OTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6416599?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/binmahone",
            "html_url": "https://github.com/binmahone",
            "followers_url": "https://api.github.com/users/binmahone/followers",
            "following_url": "https://api.github.com/users/binmahone/following{/other_user}",
            "gists_url": "https://api.github.com/users/binmahone/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/binmahone/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/binmahone/subscriptions",
            "organizations_url": "https://api.github.com/users/binmahone/orgs",
            "repos_url": "https://api.github.com/users/binmahone/repos",
            "events_url": "https://api.github.com/users/binmahone/events{/privacy}",
            "received_events_url": "https://api.github.com/users/binmahone/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-05-27T01:36:14Z",
        "updated_at": "2024-05-27T01:36:14Z",
        "author_association": "COLLABORATOR",
        "body": "well received. This happens a lot. For some test cases we may need to adjust to make them work. This is one of the acceptable ways out.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/2132495549/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]