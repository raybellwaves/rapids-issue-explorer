[
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1553760496",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8324#issuecomment-1553760496",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8324",
        "id": 1553760496,
        "node_id": "IC_kwDOD7z77c5cnIDw",
        "user": {
            "login": "mythrocks",
            "id": 5607330,
            "node_id": "MDQ6VXNlcjU2MDczMzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5607330?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mythrocks",
            "html_url": "https://github.com/mythrocks",
            "followers_url": "https://api.github.com/users/mythrocks/followers",
            "following_url": "https://api.github.com/users/mythrocks/following{/other_user}",
            "gists_url": "https://api.github.com/users/mythrocks/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mythrocks/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mythrocks/subscriptions",
            "organizations_url": "https://api.github.com/users/mythrocks/orgs",
            "repos_url": "https://api.github.com/users/mythrocks/repos",
            "events_url": "https://api.github.com/users/mythrocks/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mythrocks/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-18T23:00:59Z",
        "updated_at": "2023-05-26T17:05:15Z",
        "author_association": "COLLABORATOR",
        "body": "This is interesting. Here is the \"failing\" read plan:\r\n```\r\nGpuColumnarToRow false\r\n+- GpuProject [foo#24, gpuconcat(\", foo#24, \") AS concat(\", foo, \")#21, length(foo#24) AS length(foo)#22]\r\n   +- GpuRowToColumnar targetsize(1073741824)\r\n      +- *(1) Project [staticinvoke(class org.apache.spark.sql.catalyst.util.CharVarcharCodegenUtils, StringType, readSidePadding, foo#20, 3, true, false, true) AS foo#24]\r\n         +- GpuColumnarToRow false\r\n            +- GpuFileGpuScan orc spark_catalog.default.foobar[foo#20] Batched: true, DataFilters: [], Format: ORC, Location: InMemoryFileIndex[file:/tmp/foobar], PartitionFilters: [], PushedFilters: [], ReadSchema: struct<foo:string>\r\n```\r\nThe read isn't strictly failing on GPU. The GPU read presents right-trimmed strings (like in Spark 3.3). The CPU then adds the spaces back, to pad back to expected width, via `CharVarcharCodegenUtils.readSidePadding()`\r\n\r\nThe worst of this is that it falls off the GPU (`column->row->column`), and then does string padding on CPU.\r\n\r\nWe don't produce bad reads. But we could choose to go much faster, if we just presented what the CUDF reader reads. But then we would have to intercept code-gen. This might be a bit of work. ",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1553760496/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1553761096",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8324#issuecomment-1553761096",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8324",
        "id": 1553761096,
        "node_id": "IC_kwDOD7z77c5cnINI",
        "user": {
            "login": "mythrocks",
            "id": 5607330,
            "node_id": "MDQ6VXNlcjU2MDczMzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5607330?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mythrocks",
            "html_url": "https://github.com/mythrocks",
            "followers_url": "https://api.github.com/users/mythrocks/followers",
            "following_url": "https://api.github.com/users/mythrocks/following{/other_user}",
            "gists_url": "https://api.github.com/users/mythrocks/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mythrocks/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mythrocks/subscriptions",
            "organizations_url": "https://api.github.com/users/mythrocks/orgs",
            "repos_url": "https://api.github.com/users/mythrocks/repos",
            "events_url": "https://api.github.com/users/mythrocks/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mythrocks/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-18T23:01:54Z",
        "updated_at": "2023-05-18T23:01:54Z",
        "author_association": "COLLABORATOR",
        "body": "I've set this to low priority. There is no data corruption, bad read, etc.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1553761096/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]