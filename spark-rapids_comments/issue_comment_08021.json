[
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1496636414",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8021#issuecomment-1496636414",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8021",
        "id": 1496636414,
        "node_id": "IC_kwDOD7z77c5ZNNv-",
        "user": {
            "login": "revans2",
            "id": 3441321,
            "node_id": "MDQ6VXNlcjM0NDEzMjE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/revans2",
            "html_url": "https://github.com/revans2",
            "followers_url": "https://api.github.com/users/revans2/followers",
            "following_url": "https://api.github.com/users/revans2/following{/other_user}",
            "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
            "organizations_url": "https://api.github.com/users/revans2/orgs",
            "repos_url": "https://api.github.com/users/revans2/repos",
            "events_url": "https://api.github.com/users/revans2/events{/privacy}",
            "received_events_url": "https://api.github.com/users/revans2/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-04T21:37:39Z",
        "updated_at": "2023-04-04T21:37:39Z",
        "author_association": "COLLABORATOR",
        "body": "@mtsol \r\n\r\nWhen discussing this we were a little confused if this fails randomly like the GPU memory is near the limit on what it can support and some times it works, while other times it fails, or if this looks more like a memory leak where running in X times always works, but X+1 times crashes?\r\n\r\nWe are working on a way to mitigate situations like this #7778 The goal is to have this in the 23.06 release. If you want to try and test it sooner I can see if we can come up with a version you could try out.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1496636414/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1498510230",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8021#issuecomment-1498510230",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8021",
        "id": 1498510230,
        "node_id": "IC_kwDOD7z77c5ZUXOW",
        "user": {
            "login": "mtsol",
            "id": 20060589,
            "node_id": "MDQ6VXNlcjIwMDYwNTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/20060589?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mtsol",
            "html_url": "https://github.com/mtsol",
            "followers_url": "https://api.github.com/users/mtsol/followers",
            "following_url": "https://api.github.com/users/mtsol/following{/other_user}",
            "gists_url": "https://api.github.com/users/mtsol/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mtsol/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mtsol/subscriptions",
            "organizations_url": "https://api.github.com/users/mtsol/orgs",
            "repos_url": "https://api.github.com/users/mtsol/repos",
            "events_url": "https://api.github.com/users/mtsol/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mtsol/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-06T05:25:58Z",
        "updated_at": "2023-04-06T05:25:58Z",
        "author_association": "NONE",
        "body": "I would appreciate if you can provide me something to test it sooner.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1498510230/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1512825020",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8021#issuecomment-1512825020",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8021",
        "id": 1512825020,
        "node_id": "IC_kwDOD7z77c5aK-C8",
        "user": {
            "login": "mtsol",
            "id": 20060589,
            "node_id": "MDQ6VXNlcjIwMDYwNTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/20060589?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mtsol",
            "html_url": "https://github.com/mtsol",
            "followers_url": "https://api.github.com/users/mtsol/followers",
            "following_url": "https://api.github.com/users/mtsol/following{/other_user}",
            "gists_url": "https://api.github.com/users/mtsol/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mtsol/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mtsol/subscriptions",
            "organizations_url": "https://api.github.com/users/mtsol/orgs",
            "repos_url": "https://api.github.com/users/mtsol/repos",
            "events_url": "https://api.github.com/users/mtsol/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mtsol/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-18T10:20:55Z",
        "updated_at": "2023-04-18T10:22:01Z",
        "author_association": "NONE",
        "body": "\"if this fails randomly like the GPU memory is near the limit on what it can support and some times it works, while other times it fails, or if this looks more like a memory leak where running in X times always works, but X+1 times crashes?\"\r\n\r\nAns: In my case, it crashes always X+1 time, like when I have 1.2 million rows in my dataset, everything works fine, but when I increase the data, it crashes with this error, it crashes on 1.5 million, 2 million rows as well, and any number of data between them. I cannot say if it is related to memory leak, but as I observed the error occurs when data increases a certain limit.\r\n\r\nPS: I will appreciate if you can provide and jar prior to the release to test if that one works fine with our data.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1512825020/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1514520571",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8021#issuecomment-1514520571",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8021",
        "id": 1514520571,
        "node_id": "IC_kwDOD7z77c5aRb_7",
        "user": {
            "login": "mtsol",
            "id": 20060589,
            "node_id": "MDQ6VXNlcjIwMDYwNTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/20060589?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mtsol",
            "html_url": "https://github.com/mtsol",
            "followers_url": "https://api.github.com/users/mtsol/followers",
            "following_url": "https://api.github.com/users/mtsol/following{/other_user}",
            "gists_url": "https://api.github.com/users/mtsol/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mtsol/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mtsol/subscriptions",
            "organizations_url": "https://api.github.com/users/mtsol/orgs",
            "repos_url": "https://api.github.com/users/mtsol/repos",
            "events_url": "https://api.github.com/users/mtsol/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mtsol/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-19T10:46:56Z",
        "updated_at": "2023-04-19T10:46:56Z",
        "author_association": "NONE",
        "body": "After debugging and analysis, I found in my code that this statement:\r\n\r\ndf = df.withColumn(self.output_col_name, concat_ws(col_sep, array(self.input_col_name_list)))\r\n\r\nwas causing the error on larger data on gpus. And I think there is some bug in the gpu optimization of concat function, which needs to be addressed.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1514520571/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1514815797",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8021#issuecomment-1514815797",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8021",
        "id": 1514815797,
        "node_id": "IC_kwDOD7z77c5aSkE1",
        "user": {
            "login": "revans2",
            "id": 3441321,
            "node_id": "MDQ6VXNlcjM0NDEzMjE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/revans2",
            "html_url": "https://github.com/revans2",
            "followers_url": "https://api.github.com/users/revans2/followers",
            "following_url": "https://api.github.com/users/revans2/following{/other_user}",
            "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
            "organizations_url": "https://api.github.com/users/revans2/orgs",
            "repos_url": "https://api.github.com/users/revans2/repos",
            "events_url": "https://api.github.com/users/revans2/events{/privacy}",
            "received_events_url": "https://api.github.com/users/revans2/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-19T14:15:57Z",
        "updated_at": "2023-04-19T14:15:57Z",
        "author_association": "COLLABORATOR",
        "body": "@mstol thanks for the updated info. `concat_ws` can be a memory hog, especially if you are not also dropping the input columns after concatenating them together. We are aware that we have some problems with batch sizes when doing a ProjectExec that adds more rows. We have plans to work on this https://github.com/NVIDIA/spark-rapids/issues/7257 is the epic to work on it.\r\n\r\nI am guessing that you just removed that line from your query, and because of that it dropped the total memory pressure at that point in time and for data being processed after it.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1514815797/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1516549902",
        "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8021#issuecomment-1516549902",
        "issue_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8021",
        "id": 1516549902,
        "node_id": "IC_kwDOD7z77c5aZLcO",
        "user": {
            "login": "revans2",
            "id": 3441321,
            "node_id": "MDQ6VXNlcjM0NDEzMjE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/revans2",
            "html_url": "https://github.com/revans2",
            "followers_url": "https://api.github.com/users/revans2/followers",
            "following_url": "https://api.github.com/users/revans2/following{/other_user}",
            "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
            "organizations_url": "https://api.github.com/users/revans2/orgs",
            "repos_url": "https://api.github.com/users/revans2/repos",
            "events_url": "https://api.github.com/users/revans2/events{/privacy}",
            "received_events_url": "https://api.github.com/users/revans2/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-20T15:38:18Z",
        "updated_at": "2023-04-20T15:38:18Z",
        "author_association": "COLLABORATOR",
        "body": "@mtsol I have a snapshot jar that you can try.\r\n\r\nhttps://drive.google.com/file/d/15RyaI5OyeSJNEj5G-W4MnN8JeyQPq4ff/view?usp=sharing\r\n\r\nBe aware that there are some known bugs with it.  Specifically https://github.com/NVIDIA/spark-rapids/issues/8147 which is caused by https://github.com/rapidsai/cudf/issues/13173 so it should go without saying, but don't use this in production, and avoid the substring command if you can.\r\n\r\nIf you want a better version I can upload another one once the issue is fixed.",
        "reactions": {
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/comments/1516549902/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]