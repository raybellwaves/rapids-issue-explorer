[
    {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1743784296",
        "html_url": "https://github.com/rapidsai/cudf/issues/14239#issuecomment-1743784296",
        "issue_url": "https://api.github.com/repos/rapidsai/cudf/issues/14239",
        "id": 1743784296,
        "node_id": "IC_kwDOBWUGps5n8Alo",
        "user": {
            "login": "revans2",
            "id": 3441321,
            "node_id": "MDQ6VXNlcjM0NDEzMjE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/revans2",
            "html_url": "https://github.com/revans2",
            "followers_url": "https://api.github.com/users/revans2/followers",
            "following_url": "https://api.github.com/users/revans2/following{/other_user}",
            "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
            "organizations_url": "https://api.github.com/users/revans2/orgs",
            "repos_url": "https://api.github.com/users/revans2/repos",
            "events_url": "https://api.github.com/users/revans2/events{/privacy}",
            "received_events_url": "https://api.github.com/users/revans2/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-10-02T21:20:47Z",
        "updated_at": "2023-10-02T21:20:47Z",
        "author_association": "CONTRIBUTOR",
        "body": "We have some code that @ttnghia wrote. It will convert a range of tokens to a normalized string that matches what Spark wants. We did this for some Spark specific functionality with JSON parsing related to returning a Map instead of a Struct.\r\n\r\nhttps://github.com/NVIDIA/spark-rapids-jni/blob/54ef9991f46fa873d580315212aeae345da7152a/src/main/cpp/src/map_utils.cu#L63-L112\r\n\r\nI am not sure if this is really something that CUDF wants, but it is at least a starting point. ",
        "reactions": {
            "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1743784296/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1845680168",
        "html_url": "https://github.com/rapidsai/cudf/issues/14239#issuecomment-1845680168",
        "issue_url": "https://api.github.com/repos/rapidsai/cudf/issues/14239",
        "id": 1845680168,
        "node_id": "IC_kwDOBWUGps5uAtgo",
        "user": {
            "login": "andygrove",
            "id": 934084,
            "node_id": "MDQ6VXNlcjkzNDA4NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/andygrove",
            "html_url": "https://github.com/andygrove",
            "followers_url": "https://api.github.com/users/andygrove/followers",
            "following_url": "https://api.github.com/users/andygrove/following{/other_user}",
            "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions",
            "organizations_url": "https://api.github.com/users/andygrove/orgs",
            "repos_url": "https://api.github.com/users/andygrove/repos",
            "events_url": "https://api.github.com/users/andygrove/events{/privacy}",
            "received_events_url": "https://api.github.com/users/andygrove/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-12-07T16:43:47Z",
        "updated_at": "2023-12-07T16:43:47Z",
        "author_association": "CONTRIBUTOR",
        "body": "Here are some examples, showing input and expected output.\r\n\r\n```\r\n# Example 1: Mixed primitive types in struct\r\n\r\nINPUT:\r\n\r\n{ \"a\": \"123\" }\r\n{ \"a\": 123 }\r\n\r\nEXPECTED:\r\n\r\n+-----------+\r\n|    my_json|\r\n+-----------+\r\n|{\"a\":\"123\"}|\r\n|{\"a\":\"123\"}|\r\n+-----------+\r\n\r\n# Example 2: Mixed structs and lists in struct\r\n\r\nINPUT:\r\n\r\n{ \"a\": [1,2,3] }\r\n{ \"a\": { \"b\": 1 } }\r\n\r\nEXPECTED:\r\n\r\n+-----------------+\r\n|          my_json|\r\n+-----------------+\r\n|  {\"a\":\"[1,2,3]\"}|\r\n|{\"a\":\"{\\\"b\\\":1}\"}|\r\n+-----------------+\r\n\r\n# Example 3: Mixed structs and primitives in struct\r\n\r\nINPUT:\r\n\r\n{ \"a\": \"fox\" }\r\n{ \"a\": { \"b\": 1 } }\r\n\r\nEXPECTED:\r\n\r\n+-----------------+\r\n|my_json          |\r\n+-----------------+\r\n|{\"a\":\"fox\"}      |\r\n|{\"a\":\"{\\\"b\\\":1}\"}|\r\n+-----------------+\r\n\r\n# Example 4: Mixed lists and primitives in struct\r\n\r\nINPUT:\r\n\r\n{ \"a\": [1,2,3] }\r\n{ \"a\": \"fox\" }\r\n\r\nEXPECTED:\r\n\r\n+---------------+\r\n|my_json        |\r\n+---------------+\r\n|{\"a\":\"[1,2,3]\"}|\r\n|{\"a\":\"fox\"}    |\r\n+---------------+\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1845680168/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1845685377",
        "html_url": "https://github.com/rapidsai/cudf/issues/14239#issuecomment-1845685377",
        "issue_url": "https://api.github.com/repos/rapidsai/cudf/issues/14239",
        "id": 1845685377,
        "node_id": "IC_kwDOBWUGps5uAuyB",
        "user": {
            "login": "andygrove",
            "id": 934084,
            "node_id": "MDQ6VXNlcjkzNDA4NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/andygrove",
            "html_url": "https://github.com/andygrove",
            "followers_url": "https://api.github.com/users/andygrove/followers",
            "following_url": "https://api.github.com/users/andygrove/following{/other_user}",
            "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions",
            "organizations_url": "https://api.github.com/users/andygrove/orgs",
            "repos_url": "https://api.github.com/users/andygrove/repos",
            "events_url": "https://api.github.com/users/andygrove/events{/privacy}",
            "received_events_url": "https://api.github.com/users/andygrove/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-12-07T16:46:51Z",
        "updated_at": "2023-12-07T16:46:51Z",
        "author_association": "CONTRIBUTOR",
        "body": "There is a separate use case for arrays where the array element type differs between records. Spark infers the type as `Array<String>` in this case.\r\n\r\nThis is not necessarily a high priority and could be split out into a separate issue, but I'd like to point it out here for visibility.\r\n\r\n```\r\n# Example: Mixed primitive arrays in struct\r\n\r\nINPUT:\r\n\r\n{ \"a\": [1,2,3] }\r\n{ \"a\": [true,false,true] }\r\n{ \"a\": [\"a\", \"b\", \"c\"] }\r\n\r\nEXPECTED:\r\n\r\n+-----------------------------+\r\n|my_json                      |\r\n+-----------------------------+\r\n|{\"a\":[\"1\",\"2\",\"3\"]}          |\r\n|{\"a\":[\"true\",\"false\",\"true\"]}|\r\n|{\"a\":[\"a\",\"b\",\"c\"]}          |\r\n+-----------------------------+\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1845685377/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1949393497",
        "html_url": "https://github.com/rapidsai/cudf/issues/14239#issuecomment-1949393497",
        "issue_url": "https://api.github.com/repos/rapidsai/cudf/issues/14239",
        "id": 1949393497,
        "node_id": "IC_kwDOBWUGps50MWJZ",
        "user": {
            "login": "GregoryKimball",
            "id": 12725111,
            "node_id": "MDQ6VXNlcjEyNzI1MTEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/12725111?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GregoryKimball",
            "html_url": "https://github.com/GregoryKimball",
            "followers_url": "https://api.github.com/users/GregoryKimball/followers",
            "following_url": "https://api.github.com/users/GregoryKimball/following{/other_user}",
            "gists_url": "https://api.github.com/users/GregoryKimball/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GregoryKimball/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GregoryKimball/subscriptions",
            "organizations_url": "https://api.github.com/users/GregoryKimball/orgs",
            "repos_url": "https://api.github.com/users/GregoryKimball/repos",
            "events_url": "https://api.github.com/users/GregoryKimball/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GregoryKimball/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-02-16T21:58:25Z",
        "updated_at": "2024-02-16T21:58:25Z",
        "author_association": "CONTRIBUTOR",
        "body": "We made significant progress on this issue with #14572, and I believe we will be able to close it after #14936. @andygrove would you please let us know if there are other cases to consider?",
        "reactions": {
            "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1949393497/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1960409097",
        "html_url": "https://github.com/rapidsai/cudf/issues/14239#issuecomment-1960409097",
        "issue_url": "https://api.github.com/repos/rapidsai/cudf/issues/14239",
        "id": 1960409097,
        "node_id": "IC_kwDOBWUGps502XgJ",
        "user": {
            "login": "andygrove",
            "id": 934084,
            "node_id": "MDQ6VXNlcjkzNDA4NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/andygrove",
            "html_url": "https://github.com/andygrove",
            "followers_url": "https://api.github.com/users/andygrove/followers",
            "following_url": "https://api.github.com/users/andygrove/following{/other_user}",
            "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions",
            "organizations_url": "https://api.github.com/users/andygrove/orgs",
            "repos_url": "https://api.github.com/users/andygrove/repos",
            "events_url": "https://api.github.com/users/andygrove/events{/privacy}",
            "received_events_url": "https://api.github.com/users/andygrove/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2024-02-22T22:17:14Z",
        "updated_at": "2024-02-22T22:17:31Z",
        "author_association": "CONTRIBUTOR",
        "body": "For all the examples in https://github.com/rapidsai/cudf/issues/14239#issuecomment-1845680168, I see the correct results with https://github.com/rapidsai/cudf/pull/14936.\r\n\r\nFor the mixed array example in https://github.com/rapidsai/cudf/issues/14239#issuecomment-1845685377 I still do not see the correct results, so I filed a separate issue for this one (https://github.com/rapidsai/cudf/issues/15120).\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/rapidsai/cudf/issues/comments/1960409097/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]