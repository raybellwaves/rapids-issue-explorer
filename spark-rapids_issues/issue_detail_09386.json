{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9386",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9386/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9386/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9386/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/9386",
    "id": 1927365366,
    "node_id": "I_kwDOD7z77c5y4UL2",
    "number": 9386,
    "title": "[QST] Couldn't start UcpListener",
    "user": {
        "login": "Nikhilpa1",
        "id": 36602072,
        "node_id": "MDQ6VXNlcjM2NjAyMDcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/36602072?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Nikhilpa1",
        "html_url": "https://github.com/Nikhilpa1",
        "followers_url": "https://api.github.com/users/Nikhilpa1/followers",
        "following_url": "https://api.github.com/users/Nikhilpa1/following{/other_user}",
        "gists_url": "https://api.github.com/users/Nikhilpa1/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Nikhilpa1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Nikhilpa1/subscriptions",
        "organizations_url": "https://api.github.com/users/Nikhilpa1/orgs",
        "repos_url": "https://api.github.com/users/Nikhilpa1/repos",
        "events_url": "https://api.github.com/users/Nikhilpa1/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Nikhilpa1/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735893,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODkz",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/question",
            "name": "question",
            "color": "d876e3",
            "default": true,
            "description": "Further information is requested"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [
        {
            "login": "abellina",
            "id": 1901059,
            "node_id": "MDQ6VXNlcjE5MDEwNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1901059?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/abellina",
            "html_url": "https://github.com/abellina",
            "followers_url": "https://api.github.com/users/abellina/followers",
            "following_url": "https://api.github.com/users/abellina/following{/other_user}",
            "gists_url": "https://api.github.com/users/abellina/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/abellina/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/abellina/subscriptions",
            "organizations_url": "https://api.github.com/users/abellina/orgs",
            "repos_url": "https://api.github.com/users/abellina/repos",
            "events_url": "https://api.github.com/users/abellina/events{/privacy}",
            "received_events_url": "https://api.github.com/users/abellina/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 22,
    "created_at": "2023-10-05T04:43:45Z",
    "updated_at": "2023-10-20T15:58:12Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "While running the TPC-DS benchmark with the Spark Rapids project, I encountered a warning in the logs indicating a problem related to the UcpListener and port range. Here's the specific error message:\r\n`WARN TaskSetManager: Lost task 0.0 in stage 45.0 (TID 12171) (10.1.1.10 executor 2): java.net.BindException: Couldn't start UcpListener on port range 52897-52913\r\n\tat com.nvidia.spark.rapids.shuffle.ucx.UCX$UcpEndpointManager.startListener(UCX.scala:985)\r\n\t...\r\n`\r\nHere's the Spark configuration:\r\nexport SPARK_CONF=(\r\n    \"--master\" \"spark://${SPARK_MASTER}:7077\"\r\n    \"--deploy-mode\" \"client\"\r\n    \"--conf\" \"spark.executor.resource.gpu.amount=1\"\r\n    \"--conf\" \"spark.executor.extraClassPath=${SPARK_RAPIDS_PLUGIN_JAR}\"\r\n    \"--conf\" \"spark.driver.extraClassPath=${SPARK_RAPIDS_PLUGIN_JAR}\"\r\n    \"--conf\" \"spark.rapids.sql.concurrentGpuTasks=1\"\r\n    \"--conf\" \"spark.driver.memory=1G\"\r\n    \"--conf\" \"spark.executor.memory=1G\"\r\n    \"--conf\" \"spark.executor.cores=1\"\r\n    \"--conf\" \"spark.task.cpus=1\"\r\n    \"--conf\" \"spark.executor.resource.gpu.amount=1\"\r\n    \"--conf\" \"spark.task.resource.gpu.amount=0.25\"\r\n    \"--conf\" \"spark.rapids.memory.pinnedPool.size=1G\"\r\n    \"--conf\" \"spark.sql.files.maxPartitionBytes=128m\"\r\n    \"--conf\" \"spark.plugins=com.nvidia.spark.SQLPlugin\"\r\n    \"--conf\" \"spark.executor.resource.gpu.discoveryScript=./getGpusResources.sh\"\r\n    \"--files\" \"/home/kanaka.3/spark-rapids-project/sparkRapidsPlugin/getGpusResources.sh\"\r\n    \"--conf\" \"spark.shuffle.manager=com.nvidia.spark.rapids.spark330.RapidsShuffleManager\"\r\n    \"--conf\" \"spark.rapids.shuffle.mode=UCX\"\r\n    \"--conf\" \"spark.shuffle.service.enabled=false\"\r\n    \"--conf\" \"spark.dynamicAllocation.enabled=false\"\r\n    \"--conf\" \"spark.executorEnv.UCX_ERROR_SIGNALS=\"\r\n    \"--conf\" \"spark.executorEnv.UCX_MEMTYPE_CACHE=n\"\r\n    \"--conf\" \"spark.executorEnv.UCX_IB_RX_QUEUE_LEN=1024\"\r\n    \"--conf\" \"spark.executorEnv.UCX_RNDV_SCHEME=put_zcopy\"\r\n    \"--conf\" \"spark.executorEnv.UCX_MAX_RNDV_RAILS=1\"\r\n    \"--conf\" \"spark.executorEnv.UCX_TLS=tcp,cuda_copy,cuda_ipc,rc\"\r\n    \"--conf\" \"spark.executorEnv.UCX_NET_DEVICES=en0,mlx5_0:1\"\r\n)\r\n\r\nUCX was configured with the following options:\r\n--build=x86_64-redhat-linux-gnu\r\n--host=x86_64-redhat-linux-gnu\r\n--enable-mt\r\n--disable-params-check\r\n--enable-cma\r\n--with-cuda=/opt/cuda/11.8\r\n--with-gdrcopy=/opt/gdrcopy/2.3\r\n--with-verbs\r\n--without-cm\r\n--with-rdmacm\r\n--with-rocm\r\n--without-xpmem\r\n--without-ugni\r\n\r\nVersions:\r\nUCX - 1.14.0\r\nSPARK - 3.3.0\r\nRAPIDS - 23.10.0",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9386/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9386/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}