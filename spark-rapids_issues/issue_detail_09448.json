{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9448",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9448/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9448/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9448/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/9448",
    "id": 1944666070,
    "node_id": "I_kwDOD7z77c5z6T_W",
    "number": 9448,
    "title": "[FEA] Figure out how to monitor GPU memory usage during scale test",
    "user": {
        "login": "wjxiz1992",
        "id": 20476954,
        "node_id": "MDQ6VXNlcjIwNDc2OTU0",
        "avatar_url": "https://avatars.githubusercontent.com/u/20476954?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wjxiz1992",
        "html_url": "https://github.com/wjxiz1992",
        "followers_url": "https://api.github.com/users/wjxiz1992/followers",
        "following_url": "https://api.github.com/users/wjxiz1992/following{/other_user}",
        "gists_url": "https://api.github.com/users/wjxiz1992/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/wjxiz1992/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wjxiz1992/subscriptions",
        "organizations_url": "https://api.github.com/users/wjxiz1992/orgs",
        "repos_url": "https://api.github.com/users/wjxiz1992/repos",
        "events_url": "https://api.github.com/users/wjxiz1992/events{/privacy}",
        "received_events_url": "https://api.github.com/users/wjxiz1992/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735884,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODg0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        },
        {
            "id": 5893831059,
            "node_id": "LA_kwDOD7z77c8AAAABX0y5kw",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/scale%20test",
            "name": "scale test",
            "color": "006b75",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2023-10-16T08:29:38Z",
    "updated_at": "2023-10-18T07:20:36Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\nWe have some tools to monitor the system metrics like CPU, IO, Host Memory usage but not include the GPU metrics.\r\nWe want to understand the GPU memory usage during the scale test(related to https://github.com/NVIDIA/spark-rapids/issues/8811).\r\n\r\nAn easy way is to launch a script that calls `nvidia-smi` to capture the gpu metrics every second or more frequently:\r\n```\r\nwhile true; do nvidia-smi --query-gpu=utilization.gpu,utilization.memory --format=csv,noheader,nounits >> gpu_usage.csv; sleep 1; done\r\n```\r\nthen we can further draw an image , map the usage to each query etc.\r\n\r\nBut the problem is RMM allocates the GPU memory beforehand, so nvidia-smi won't capture the actuall GPU memory used by our plugin, nvidia-smi will only see a full GPU memory usage from the very beginning to the end. I know we can disable the RMM pool to allow nvidia-smi works in this case but I doubt if that memory usage is identical to what when RMM ASYNC is enabled.\r\n\r\nNeed some more solution here.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9448/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9448/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}