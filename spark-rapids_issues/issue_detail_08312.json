{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8312",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8312/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8312/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8312/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8312",
    "id": 1714665039,
    "node_id": "I_kwDOD7z77c5mM7ZP",
    "number": 8312,
    "title": "[FEA] Support SplitAndRetry for GpuSampleExec",
    "user": {
        "login": "revans2",
        "id": 3441321,
        "node_id": "MDQ6VXNlcjM0NDEzMjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/revans2",
        "html_url": "https://github.com/revans2",
        "followers_url": "https://api.github.com/users/revans2/followers",
        "following_url": "https://api.github.com/users/revans2/following{/other_user}",
        "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
        "organizations_url": "https://api.github.com/users/revans2/orgs",
        "repos_url": "https://api.github.com/users/revans2/repos",
        "events_url": "https://api.github.com/users/revans2/events{/privacy}",
        "received_events_url": "https://api.github.com/users/revans2/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735884,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODg0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        },
        {
            "id": 4029093938,
            "node_id": "LA_kwDOD7z77c7wJxgy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/reliability",
            "name": "reliability",
            "color": "2654AF",
            "default": false,
            "description": "Features to improve reliability or bugs that severly impact the reliability of the plugin"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2023-05-17T21:14:37Z",
    "updated_at": "2023-05-24T16:30:37Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\n`GpuSampleExec` filters out rows based off of some complicated random sampling code from Apache Spark. This is really the GpuPoissonSampler, and the BernoulliCellSampler.  Both of these the majority of the code comes directly from Spark and we just take the indexes and send them down to the GPU to do the sampling.\r\n\r\n**Describe the solution you'd like**\r\nWe have two options here.\r\n\r\n1. We copy over all of the code from Spark and allow this to checkpoint and restore the state of the random samplers so we can restart from a good location each time and not worry about splits/etc.\r\n2. We wrap the sampler with something that caches the indexes on the CPU until we know we no longer need them and can checkpoint/restore a view into the indexes.  I think the latter is going to be a lot less code and simpler to implement.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8312/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8312/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}