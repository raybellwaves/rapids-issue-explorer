{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10372",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10372/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10372/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10372/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/10372",
    "id": 2115757266,
    "node_id": "I_kwDOD7z77c5-G-TS",
    "number": 10372,
    "title": "[FEA] Heuristic on when to do a project on TakeOrderedAndProject",
    "user": {
        "login": "revans2",
        "id": 3441321,
        "node_id": "MDQ6VXNlcjM0NDEzMjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/revans2",
        "html_url": "https://github.com/revans2",
        "followers_url": "https://api.github.com/users/revans2/followers",
        "following_url": "https://api.github.com/users/revans2/following{/other_user}",
        "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
        "organizations_url": "https://api.github.com/users/revans2/orgs",
        "repos_url": "https://api.github.com/users/revans2/repos",
        "events_url": "https://api.github.com/users/revans2/events{/privacy}",
        "received_events_url": "https://api.github.com/users/revans2/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735884,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODg0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        },
        {
            "id": 2094500742,
            "node_id": "MDU6TGFiZWwyMDk0NTAwNzQy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/performance",
            "name": "performance",
            "color": "d845b1",
            "default": false,
            "description": "A performance related task/issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2024-02-02T20:35:28Z",
    "updated_at": "2024-02-15T19:51:13Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\nSpark's implementation of TakeOrderedAndProject will first do a top n calculation for each map task, then it will shuffle those top N's to a single downstream task where it will do a final top N calculation and finally will do a project on the data.\r\n\r\nMost of the time this works out well because in I am looking for just 100 rows out of billions of rows, holding off on doing the calculation until we have gotten it down to just a few rows is ideal.  But there are cases when this is not true. Say we have a large list of arrays, and we really just want the length of those arrays. Getting the length is cheap, but moving the arrays around as we sort the data, etc can be very expensive.\r\n\r\nI think what we probably want to do is to look at the types going into the project and the types coming out of the project and use a heuristic to guess which is going to be larger. Then we decide at translation time if we do the project at the end of the first TopN calculation or at the end of the second one.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10372/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10372/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}