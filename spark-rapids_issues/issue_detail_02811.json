{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2811",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2811/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2811/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2811/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/2811",
    "id": 929563617,
    "node_id": "MDU6SXNzdWU5Mjk1NjM2MTc=",
    "number": 2811,
    "title": "[BUG] CBO incorrectly assumes that final AQE results have to be bought back onto CPU",
    "user": {
        "login": "andygrove",
        "id": 934084,
        "node_id": "MDQ6VXNlcjkzNDA4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andygrove",
        "html_url": "https://github.com/andygrove",
        "followers_url": "https://api.github.com/users/andygrove/followers",
        "following_url": "https://api.github.com/users/andygrove/following{/other_user}",
        "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions",
        "organizations_url": "https://api.github.com/users/andygrove/orgs",
        "repos_url": "https://api.github.com/users/andygrove/repos",
        "events_url": "https://api.github.com/users/andygrove/events{/privacy}",
        "received_events_url": "https://api.github.com/users/andygrove/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735874,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODc0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/bug",
            "name": "bug",
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working"
        },
        {
            "id": 2094500742,
            "node_id": "MDU6TGFiZWwyMDk0NTAwNzQy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/performance",
            "name": "performance",
            "color": "d845b1",
            "default": false,
            "description": "A performance related task/issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-06-24T19:52:30Z",
    "updated_at": "2021-07-13T21:21:25Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "**Describe the bug**\r\nThe CBO cost model currently assumes that the final query results need to be bought back onto CPU. This is true in the case of calling `executeCollect` but is not true if the results are to be written out to Parquet on the GPU.\r\n\r\nThe challenge is that when the optimizer is called for `AdaptiveSparkPlanExec` we do not know the context of whether the plan is being called as part of a `collect` or `write` operation. \r\n\r\nWe may want to propose changes to Spark to provide more information during AQE planning. There may also be hacks we can consider until we can get changes into Spark.\r\n\r\nWe should look at the non-AQE case as well and see if the issue applies there too.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2811/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2811/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}