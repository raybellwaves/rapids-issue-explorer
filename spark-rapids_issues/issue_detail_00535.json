{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/535",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/535/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/535/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/535/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/535",
    "id": 676401871,
    "node_id": "MDU6SXNzdWU2NzY0MDE4NzE=",
    "number": 535,
    "title": "[BUG] Spark to_date with invalid format doesn't run on GPU",
    "user": {
        "login": "tgravescs",
        "id": 4563792,
        "node_id": "MDQ6VXNlcjQ1NjM3OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4563792?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tgravescs",
        "html_url": "https://github.com/tgravescs",
        "followers_url": "https://api.github.com/users/tgravescs/followers",
        "following_url": "https://api.github.com/users/tgravescs/following{/other_user}",
        "gists_url": "https://api.github.com/users/tgravescs/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tgravescs/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tgravescs/subscriptions",
        "organizations_url": "https://api.github.com/users/tgravescs/orgs",
        "repos_url": "https://api.github.com/users/tgravescs/repos",
        "events_url": "https://api.github.com/users/tgravescs/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tgravescs/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735874,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODc0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/bug",
            "name": "bug",
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working"
        },
        {
            "id": 2223784867,
            "node_id": "MDU6TGFiZWwyMjIzNzg0ODY3",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/P2",
            "name": "P2",
            "color": "8ff7b9",
            "default": false,
            "description": "Not required for release"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2020-08-10T20:38:16Z",
    "updated_at": "2020-08-11T21:13:47Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "I was looking at a query and noticed part of it wasn't running on the GPU. It looks like Apache Spark ignores invalid formats to to_date when the column its converted is already a timestamp type (EVENT_TIME is timestamp type)\r\n\r\n            .withColumn('_EVENT_DATE', sql_func.to_date(col(\"EVENT_TIME\", \u201cday\u201d))) \\\r\n\r\nYou can put anything in the second field where \"day\" is and it just ignores it.  The rapids plugin however fails to parse \"day\" so it says not to run it on the GPU.  \r\n\r\nWe should see if we want to do the same logic and ignore the format field when its timestamp type.  The workaround is just to remove the \"day\" format type and it runs on gpu as well.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/535/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/535/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}