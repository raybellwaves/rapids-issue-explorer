{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/5058",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/5058/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/5058/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/5058/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/5058",
    "id": 1181082468,
    "node_id": "I_kwDOD7z77c5GZeNk",
    "number": 5058,
    "title": "Look into semaphore usage in q78 and q95",
    "user": {
        "login": "abellina",
        "id": 1901059,
        "node_id": "MDQ6VXNlcjE5MDEwNTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1901059?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/abellina",
        "html_url": "https://github.com/abellina",
        "followers_url": "https://api.github.com/users/abellina/followers",
        "following_url": "https://api.github.com/users/abellina/following{/other_user}",
        "gists_url": "https://api.github.com/users/abellina/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/abellina/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/abellina/subscriptions",
        "organizations_url": "https://api.github.com/users/abellina/orgs",
        "repos_url": "https://api.github.com/users/abellina/repos",
        "events_url": "https://api.github.com/users/abellina/events{/privacy}",
        "received_events_url": "https://api.github.com/users/abellina/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2094500742,
            "node_id": "MDU6TGFiZWwyMDk0NTAwNzQy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/performance",
            "name": "performance",
            "color": "d845b1",
            "default": false,
            "description": "A performance related task/issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2022-03-25T18:00:52Z",
    "updated_at": "2023-05-15T17:19:19Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "This change: https://github.com/NVIDIA/spark-rapids/pull/4588, we removed some cases where we were holding onto the semaphore for IO during the SHJ, but not all cases. There are fallback scenarios, specifically when the host-side batch is larger than the batch limit (at which point we want to ensure things are spillable, etc), or when our incoming batches aren't just serialized batches (shuffle).\r\n\r\nThis scenario seems may be covered, but the task is to add some nvtx ranges and figure out what this is and document it here. Maybe there's something we can do and release the semaphore here also, but I am not sure yet.\r\n\r\n![Screenshot from 2022-03-25 13-00-21](https://user-images.githubusercontent.com/1901059/160176393-31c000cf-284a-4b7c-aa03-2824da335508.png)\r\n\r\nZoomed in:\r\n\r\n![Screenshot from 2022-03-25 12-44-49](https://user-images.githubusercontent.com/1901059/160174082-05f1f1eb-1d02-4609-aa58-eaf59c52f7f2.png)\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/5058/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/5058/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}