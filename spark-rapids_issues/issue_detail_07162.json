{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7162",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7162/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7162/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7162/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/7162",
    "id": 1462329709,
    "node_id": "I_kwDOD7z77c5XKWFt",
    "number": 7162,
    "title": "GPU broadcasts should not implicitly create device data on deserialize",
    "user": {
        "login": "jlowe",
        "id": 1360766,
        "node_id": "MDQ6VXNlcjEzNjA3NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1360766?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlowe",
        "html_url": "https://github.com/jlowe",
        "followers_url": "https://api.github.com/users/jlowe/followers",
        "following_url": "https://api.github.com/users/jlowe/following{/other_user}",
        "gists_url": "https://api.github.com/users/jlowe/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jlowe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jlowe/subscriptions",
        "organizations_url": "https://api.github.com/users/jlowe/orgs",
        "repos_url": "https://api.github.com/users/jlowe/repos",
        "events_url": "https://api.github.com/users/jlowe/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jlowe/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2586576266,
            "node_id": "MDU6TGFiZWwyNTg2NTc2MjY2",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/task",
            "name": "task",
            "color": "65abf7",
            "default": false,
            "description": "Work required that improves the product but is not user facing"
        },
        {
            "id": 4029093938,
            "node_id": "LA_kwDOD7z77c7wJxgy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/reliability",
            "name": "reliability",
            "color": "2654AF",
            "default": false,
            "description": "Features to improve reliability or bugs that severly impact the reliability of the plugin"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2022-11-23T19:58:19Z",
    "updated_at": "2022-11-29T21:09:17Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Currently deserializing a GPU broadcast will implicitly place the broadcast data in GPU memory.  This has caused some problems in the past given how and when this can be called, and requires a finalizer to clean up the GPU memory when the broadcast is cleaned up by garbage collection.  It would be cleaner to have the broadcast data to be received as normal host data, and it is the responsibility of the code requesting the broadcast data to manifest the GPU data, if necessary.\r\n\r\nOne idea on how to accomplish this is to have a GPU broadcast registry singleton, where broadcasts objects are registered.  Deserializing a broadcast does not put the data on the GPU.  Code that needs broadcast data would deserialize an object that is a proxy to the GPU data and has a method to manifest a batch.  That method would atomically check the registry if there's already a broadcast registered, and if so simply return the existing broadcast data.  If a broadcast is not already registered, the method would register it and then return the data.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7162/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7162/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}