{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9387",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9387/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9387/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9387/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/9387",
    "id": 1927377712,
    "node_id": "I_kwDOD7z77c5y4XMw",
    "number": 9387,
    "title": "[BUG] String columns written with `fastparquet` are read differently with Spark RAPIDS",
    "user": {
        "login": "mythrocks",
        "id": 5607330,
        "node_id": "MDQ6VXNlcjU2MDczMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5607330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mythrocks",
        "html_url": "https://github.com/mythrocks",
        "followers_url": "https://api.github.com/users/mythrocks/followers",
        "following_url": "https://api.github.com/users/mythrocks/following{/other_user}",
        "gists_url": "https://api.github.com/users/mythrocks/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mythrocks/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mythrocks/subscriptions",
        "organizations_url": "https://api.github.com/users/mythrocks/orgs",
        "repos_url": "https://api.github.com/users/mythrocks/repos",
        "events_url": "https://api.github.com/users/mythrocks/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mythrocks/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735874,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODc0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/bug",
            "name": "bug",
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working"
        },
        {
            "id": 2710265788,
            "node_id": "MDU6TGFiZWwyNzEwMjY1Nzg4",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/cudf_dependency",
            "name": "cudf_dependency",
            "color": "7400FF",
            "default": false,
            "description": "An issue or PR with this label depends on a new feature in cudf"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2023-10-05T04:59:36Z",
    "updated_at": "2023-10-10T20:12:10Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "**Description**\r\n\r\nAs part of #9366, it was noticed that string columns written with `fastparquet` are read differently on Spark RAPIDS, as compared to vanilla Apache Spark. There seemed to be trailing characters at the end of the last row.\r\n\r\n**Repro**\r\n\r\nA gzipped example Parquet file is attached herewith: [fastparquet_string.zip](https://github.com/NVIDIA/spark-rapids/files/12812419/fastparquet_string.zip).\r\n\r\nIn the integration tests, the difference manifests as extra characters at the end of the last row. It isn't quite as obvious when read explicitly on Apache Spark and Spark RAPIDS:\r\n```scala\r\n// Spark RAPIDS:\r\nscala> spark.read.parquet(\"/tmp/parq_write\").show()\r\n...\r\n+--------------+\r\n|           str|\r\n+--------------+\r\n|           all|\r\n|           the|\r\n|leaves|\r\n+--------------+\r\n```\r\n```scala\r\n// Apache Spark:\r\nscala> spark.read.parquet(\"/tmp/parq_write\").show()\r\n+------+\r\n|   str|\r\n+------+\r\n|   all|\r\n|   the|\r\n|leaves|\r\n+------+\r\n```\r\nNote that the attachment is a smaller, contrived version of the actual failing test. That file is larger and less readable than the attachment here.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9387/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/9387/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}