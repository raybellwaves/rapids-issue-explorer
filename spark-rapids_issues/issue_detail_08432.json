{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8432",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8432/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8432/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8432/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/8432",
    "id": 1732519637,
    "node_id": "I_kwDOD7z77c5nRCbV",
    "number": 8432,
    "title": "[FEA] Look at switching algorithms on split and retry in aggregation",
    "user": {
        "login": "revans2",
        "id": 3441321,
        "node_id": "MDQ6VXNlcjM0NDEzMjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/revans2",
        "html_url": "https://github.com/revans2",
        "followers_url": "https://api.github.com/users/revans2/followers",
        "following_url": "https://api.github.com/users/revans2/following{/other_user}",
        "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
        "organizations_url": "https://api.github.com/users/revans2/orgs",
        "repos_url": "https://api.github.com/users/revans2/repos",
        "events_url": "https://api.github.com/users/revans2/events{/privacy}",
        "received_events_url": "https://api.github.com/users/revans2/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735884,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODg0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        },
        {
            "id": 4029093938,
            "node_id": "LA_kwDOD7z77c7wJxgy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/reliability",
            "name": "reliability",
            "color": "2654AF",
            "default": false,
            "description": "Features to improve reliability or bugs that severly impact the reliability of the plugin"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2023-05-30T15:37:36Z",
    "updated_at": "2023-05-31T18:22:17Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\nAggregations are kind of complicated. We currently have a sort fallback, but that might change https://github.com/NVIDIA/spark-rapids/issues/8391\r\n\r\nHowever the fallback to sort, or whatever is next, is based on the intermediate size getting larger than the target batch size. If the user configured the job incorrectly where there is not enough memory for a target batch size input to complete, then we might want to look at falling back to another algorithm sooner.\r\n\r\nFor example I have seen stack traces in some extreme tests where we try to concat batches together and cannot because we are out of memory.  I think this is likely due to fragmentation, but the concat code does not have a split and retry handling.  It probably should fall back to doing sort based aggregations instead.\r\n\r\nThis should not be that common, but I thought we should still have it as something we could do more to improve reliability.\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8432/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/8432/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}