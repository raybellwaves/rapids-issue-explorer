{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2417",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2417/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2417/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2417/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/2417",
    "id": 891937941,
    "node_id": "MDU6SXNzdWU4OTE5Mzc5NDE=",
    "number": 2417,
    "title": "[FEA] Improve cost-based optimizer handling of broadcast hash joins",
    "user": {
        "login": "andygrove",
        "id": 934084,
        "node_id": "MDQ6VXNlcjkzNDA4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andygrove",
        "html_url": "https://github.com/andygrove",
        "followers_url": "https://api.github.com/users/andygrove/followers",
        "following_url": "https://api.github.com/users/andygrove/following{/other_user}",
        "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions",
        "organizations_url": "https://api.github.com/users/andygrove/orgs",
        "repos_url": "https://api.github.com/users/andygrove/repos",
        "events_url": "https://api.github.com/users/andygrove/events{/privacy}",
        "received_events_url": "https://api.github.com/users/andygrove/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735884,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODg0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/feature%20request",
            "name": "feature request",
            "color": "a2eeef",
            "default": false,
            "description": "New feature or request"
        },
        {
            "id": 2094500742,
            "node_id": "MDU6TGFiZWwyMDk0NTAwNzQy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/performance",
            "name": "performance",
            "color": "d845b1",
            "default": false,
            "description": "A performance related task/issue"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-05-14T13:48:04Z",
    "updated_at": "2021-05-18T20:17:53Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\nPR https://github.com/NVIDIA/spark-rapids/pull/2397 included a bug fix to prevent the cost-based opitmizer from moving a GPU BroadcastExchange back to CPU but leaving the consuming BroadcastHashJoin on the GPU, resulting in an invalid plan. It would be good to see if we could make this smarter because there may be cases where we want to force both the join and the exchange back onto CPU and this is currently not supported.\r\n\r\n**Describe the solution you'd like**\r\nI'm not sure what the solution will look like yet, but maybe the optimizer needs to look at the combined cost of related operators rather than just evaluating the cost of individual operators.\r\n\r\n**Describe alternatives you've considered**\r\nWe could just leave things as they are and accept that we will always move to GPU for broadcasts when we can support them.\r\n\r\n**Additional context**\r\nNone\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2417/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/2417/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}