{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/4609",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/4609/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/4609/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/4609/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/4609",
    "id": 1112122483,
    "node_id": "I_kwDOD7z77c5CSaRz",
    "number": 4609,
    "title": "[FEA] JSON reader parses types compatible with Spark",
    "user": {
        "login": "GaryShen2008",
        "id": 22128535,
        "node_id": "MDQ6VXNlcjIyMTI4NTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/22128535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/GaryShen2008",
        "html_url": "https://github.com/GaryShen2008",
        "followers_url": "https://api.github.com/users/GaryShen2008/followers",
        "following_url": "https://api.github.com/users/GaryShen2008/following{/other_user}",
        "gists_url": "https://api.github.com/users/GaryShen2008/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/GaryShen2008/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/GaryShen2008/subscriptions",
        "organizations_url": "https://api.github.com/users/GaryShen2008/orgs",
        "repos_url": "https://api.github.com/users/GaryShen2008/repos",
        "events_url": "https://api.github.com/users/GaryShen2008/events{/privacy}",
        "received_events_url": "https://api.github.com/users/GaryShen2008/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2586576266,
            "node_id": "MDU6TGFiZWwyNTg2NTc2MjY2",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/task",
            "name": "task",
            "color": "65abf7",
            "default": false,
            "description": "Work required that improves the product but is not user facing"
        },
        {
            "id": 2589743725,
            "node_id": "MDU6TGFiZWwyNTg5NzQzNzI1",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/epic",
            "name": "epic",
            "color": "0E8A16",
            "default": false,
            "description": "Issue that encompasses a significant feature or body of work"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-01-24T03:24:53Z",
    "updated_at": "2024-03-15T15:56:47Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "The current CUDF code parses types how they want to, and not how Spark wants them to be parsed. \r\nWe might be able to ask CUDF to read all of the types as Strings and then parse them ourselves. \r\nThis will not fix everything because looking at cast there are a number of types \r\nthat we do not fully support when casting from a string still. \r\nBut it will be a step in the right direction and should let us avoid most of the enable this type for JSON configs. \r\nWe could at a minimum reused the cast from string configs that already exist.\r\n\r\n This will not work 100% because Spark parses it line by line and then casts it to the desired result.  \r\nSo with {\"a\": \"100.0\"} and {\"a\": 100.0}. If we asked for a double to be returned,\r\nSpark would parse the first one as a String and then cast it to a double, \r\nbut for the second one it would parse it directly as a double and do no casting at the end.  \r\nIn most cases this should not make a difference, but there can be very subtile differences, \r\nbetween Sparks casting and what the JSON parser does to read the data.\r\n\r\n- [x] https://github.com/NVIDIA/spark-rapids/issues/4763\r\n- [x] https://github.com/NVIDIA/spark-rapids/issues/4762\r\n- [x] https://github.com/NVIDIA/spark-rapids/pull/4637\r\n- [x] https://github.com/NVIDIA/spark-rapids/pull/4825\r\n- [x] https://github.com/NVIDIA/spark-rapids/pull/4853\r\n- [x] https://github.com/NVIDIA/spark-rapids/issues/4863\r\n- [ ] https://github.com/NVIDIA/spark-rapids/issues/4940\r\n- [x] https://github.com/NVIDIA/spark-rapids/issues/4837\r\n- [ ] https://github.com/rapidsai/cudf/issues/15318\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/4609/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/4609/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}