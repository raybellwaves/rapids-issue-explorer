{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/507",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/507/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/507/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/507/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/507",
    "id": 672847430,
    "node_id": "MDU6SXNzdWU2NzI4NDc0MzA=",
    "number": 507,
    "title": "[FEA] explore faster data transitions",
    "user": {
        "login": "revans2",
        "id": 3441321,
        "node_id": "MDQ6VXNlcjM0NDEzMjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3441321?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/revans2",
        "html_url": "https://github.com/revans2",
        "followers_url": "https://api.github.com/users/revans2/followers",
        "following_url": "https://api.github.com/users/revans2/following{/other_user}",
        "gists_url": "https://api.github.com/users/revans2/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/revans2/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/revans2/subscriptions",
        "organizations_url": "https://api.github.com/users/revans2/orgs",
        "repos_url": "https://api.github.com/users/revans2/repos",
        "events_url": "https://api.github.com/users/revans2/events{/privacy}",
        "received_events_url": "https://api.github.com/users/revans2/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2094500742,
            "node_id": "MDU6TGFiZWwyMDk0NTAwNzQy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/performance",
            "name": "performance",
            "color": "d845b1",
            "default": false,
            "description": "A performance related task/issue"
        },
        {
            "id": 2589743725,
            "node_id": "MDU6TGFiZWwyNTg5NzQzNzI1",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/epic",
            "name": "epic",
            "color": "0E8A16",
            "default": false,
            "description": "Issue that encompasses a significant feature or body of work"
        },
        {
            "id": 2710265788,
            "node_id": "MDU6TGFiZWwyNzEwMjY1Nzg4",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/cudf_dependency",
            "name": "cudf_dependency",
            "color": "7400FF",
            "default": false,
            "description": "An issue or PR with this label depends on a new feature in cudf"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
        "login": "hyperbolic2346",
        "id": 3506308,
        "node_id": "MDQ6VXNlcjM1MDYzMDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3506308?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hyperbolic2346",
        "html_url": "https://github.com/hyperbolic2346",
        "followers_url": "https://api.github.com/users/hyperbolic2346/followers",
        "following_url": "https://api.github.com/users/hyperbolic2346/following{/other_user}",
        "gists_url": "https://api.github.com/users/hyperbolic2346/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/hyperbolic2346/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/hyperbolic2346/subscriptions",
        "organizations_url": "https://api.github.com/users/hyperbolic2346/orgs",
        "repos_url": "https://api.github.com/users/hyperbolic2346/repos",
        "events_url": "https://api.github.com/users/hyperbolic2346/events{/privacy}",
        "received_events_url": "https://api.github.com/users/hyperbolic2346/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "hyperbolic2346",
            "id": 3506308,
            "node_id": "MDQ6VXNlcjM1MDYzMDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3506308?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hyperbolic2346",
            "html_url": "https://github.com/hyperbolic2346",
            "followers_url": "https://api.github.com/users/hyperbolic2346/followers",
            "following_url": "https://api.github.com/users/hyperbolic2346/following{/other_user}",
            "gists_url": "https://api.github.com/users/hyperbolic2346/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hyperbolic2346/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hyperbolic2346/subscriptions",
            "organizations_url": "https://api.github.com/users/hyperbolic2346/orgs",
            "repos_url": "https://api.github.com/users/hyperbolic2346/repos",
            "events_url": "https://api.github.com/users/hyperbolic2346/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hyperbolic2346/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2020-08-04T14:42:37Z",
    "updated_at": "2023-08-07T19:25:52Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "When working with some of the cache/persist operations it has become very clear that moving data from CPU to GPU and back is a real performance problem. From past experience trying to optimize shuffle, part of the problem come down to the number of buffers that need to be moved.  This is something that is going to become more and more of a problem with nested data types. The rest of the problem has a lot to do with the actual data access pattern. Going from row to column and column to row inherently forces one of the operations to stride through memory.  This is really bad for the CPU cache.\r\n\r\nWe have tried to write a custom kernel to translate GPU columnar data into spark's unsafe row format in the past, and it did help some, but the memory format is really wasteful and resulted in bad performance because we could not allocate enough GPU memory to make it worth while. \r\n\r\nI personally would like to see us work with the cudf team to develop a packed row based format that we could translate to/from on the GPU.  Doing a row based to row based translation is not that expensive for the CPU.\r\n\r\nTasks: \r\n- https://github.com/rapidsai/dask-cudf/issues/102 \r\n- https://github.com/NVIDIA/spark-rapids/pull/1390 \r\n- https://github.com/rapidsai/cudf/pull/8444\r\n- https://github.com/rapidsai/cudf/issues/10033\r\n- Accelerated columnar to row/row to columnar for nested types\r\n- https://github.com/rapidsai/cudf/issues/10032\r\n- https://github.com/NVIDIA/spark-rapids/issues/5633\r\n- https://github.com/NVIDIA/spark-rapids/issues/5634\r\n- https://github.com/NVIDIA/spark-rapids/issues/5635\r\n- https://github.com/NVIDIA/spark-rapids/issues/5636\r\n- https://github.com/NVIDIA/spark-rapids/issues/6065",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/507/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/507/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}