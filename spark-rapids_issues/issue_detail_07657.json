{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7657",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7657/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7657/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7657/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/7657",
    "id": 1569956497,
    "node_id": "I_kwDOD7z77c5dk6KR",
    "number": 7657,
    "title": "[FEA] Investigate possible deduplication of expressions - regexp_extract case",
    "user": {
        "login": "tgravescs",
        "id": 4563792,
        "node_id": "MDQ6VXNlcjQ1NjM3OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4563792?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tgravescs",
        "html_url": "https://github.com/tgravescs",
        "followers_url": "https://api.github.com/users/tgravescs/followers",
        "following_url": "https://api.github.com/users/tgravescs/following{/other_user}",
        "gists_url": "https://api.github.com/users/tgravescs/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tgravescs/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tgravescs/subscriptions",
        "organizations_url": "https://api.github.com/users/tgravescs/orgs",
        "repos_url": "https://api.github.com/users/tgravescs/repos",
        "events_url": "https://api.github.com/users/tgravescs/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tgravescs/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 4029093938,
            "node_id": "LA_kwDOD7z77c7wJxgy",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/reliability",
            "name": "reliability",
            "color": "2654AF",
            "default": false,
            "description": "Features to improve reliability or bugs that severly impact the reliability of the plugin"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2023-02-03T14:47:24Z",
    "updated_at": "2023-02-07T21:56:40Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "**Is your feature request related to a problem? Please describe.**\r\nCustomer has a query where they are using regexp_extract in side of a join that becomes a BHJ. It has 2 of them within case when with an and that I regularly see evaluated twice in traces.  In this case they do pick different indexes within that extract but I think it extracts everything and then chooses the index.  It would be nice if we could figure out we can deduplicate these expressions and only run it once.\r\n\r\nThe query looks like this:\r\n```\r\n\r\ninner join sometable on\r\n\t(foo =  case when id like '%-val-%' then regexp_extract(id, '(\\\\\\\\d+)-val-(\\\\\\\\d+)', 1) else val end\r\n\tand id2 = case when id like '%-val-%' then regexp_extract(id, '(\\\\\\\\d+)-val-(\\\\\\\\d+)', 2) else -1 end)\r\nwhere\r\n```\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7657/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/7657/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}