{
    "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10180",
    "repository_url": "https://api.github.com/repos/NVIDIA/spark-rapids",
    "labels_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10180/labels{/name}",
    "comments_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10180/comments",
    "events_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10180/events",
    "html_url": "https://github.com/NVIDIA/spark-rapids/issues/10180",
    "id": 2075318253,
    "node_id": "I_kwDOD7z77c57stft",
    "number": 10180,
    "title": "[BUG] Some file read RDDs do not always update task bytes read",
    "user": {
        "login": "jlowe",
        "id": 1360766,
        "node_id": "MDQ6VXNlcjEzNjA3NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1360766?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jlowe",
        "html_url": "https://github.com/jlowe",
        "followers_url": "https://api.github.com/users/jlowe/followers",
        "following_url": "https://api.github.com/users/jlowe/following{/other_user}",
        "gists_url": "https://api.github.com/users/jlowe/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jlowe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jlowe/subscriptions",
        "organizations_url": "https://api.github.com/users/jlowe/orgs",
        "repos_url": "https://api.github.com/users/jlowe/repos",
        "events_url": "https://api.github.com/users/jlowe/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jlowe/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2061735874,
            "node_id": "MDU6TGFiZWwyMDYxNzM1ODc0",
            "url": "https://api.github.com/repos/NVIDIA/spark-rapids/labels/bug",
            "name": "bug",
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2024-01-10T22:16:23Z",
    "updated_at": "2024-01-16T21:11:12Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "@revans2 noticed that tasks in a Parquet scan stage do not always show a number of bytes read despite needing to read the footer to determine there's nothing to read.  At a minimum the number of bytes read for the footer should appear even for these degenerate tasks.  I noticed that it appears to work properly if the PERFILE reader is being used, as that leverages GpuFileScanRDD which has a wrapping iterator on the entire RDD that gathers the filesystem-level statistics.  I did not see that for GpuDataSourceRDD which is used by the coalescing and multifile readers.\r\n\r\nI'm not 100% sure the right fix is to simply wrap the RDD iterator in GpuDataSourceRDD with logic to update task stats like the wrapping iterator in GpuFileScanRDD, since there's multiple threads involved.  It appears there's an attempt to handle filesystem bytes read stats in helper threads for the multithreaded readers, but maybe there's a bug where these stats aren't reported for the degenerate case properly.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10180/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/NVIDIA/spark-rapids/issues/10180/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}